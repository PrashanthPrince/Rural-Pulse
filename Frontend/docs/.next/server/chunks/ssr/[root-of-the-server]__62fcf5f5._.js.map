{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/shared/Sidebar.js"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\n\n/**\n * Sidebar Component\n * \n * Reusable sidebar navigation component with user profile display and collapse functionality\n * \n * @param {Object} props\n * @param {Object} props.profile - User profile data\n * @param {Function} props.onLogout - Logout handler function\n * @param {Function} props.onCollapseChange - Callback when sidebar collapse state changes\n */\nexport default function Sidebar({ profile, onLogout, onCollapseChange }) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const [isCollapsed, setIsCollapsed] = useState(() => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(\"sidebarCollapsed\");\n      return saved !== null ? JSON.parse(saved) : false;\n    }\n    return false;\n  });\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Load sidebar state from localStorage on mount\n  useEffect(() => {\n    if (onCollapseChange) {\n      onCollapseChange(isCollapsed);\n    }\n    setIsMounted(true);\n  }, [isCollapsed, onCollapseChange]);\n\n  const menuItems = [\n    { name: \"Dashboard\", path: \"/dashboard\", icon: \"ðŸ“Š\", disabled: true },\n    { name: \"Products\", path: \"/products\", icon: \"ðŸ“¦\", disabled: false },\n    { name: \"Campaigns\", path: \"/campaigns\", icon: \"ðŸ“¢\", disabled: true },\n    { name: \"Analytics\", path: \"/analytics\", icon: \"ðŸ“ˆ\", disabled: true },\n  ];\n\n  const isActive = (path) => pathname === path;\n\n  const toggleSidebar = () => {\n    const newState = !isCollapsed;\n    setIsCollapsed(newState);\n    localStorage.setItem(\"sidebarCollapsed\", JSON.stringify(newState));\n    if (onCollapseChange) {\n      onCollapseChange(newState);\n    }\n  };\n\n  const handleMenuClick = (item) => {\n    if (item.disabled) return;\n    router.push(item.path);\n  };\n\n  const handleLogout = () => {\n    // Clear sidebar state from localStorage on logout\n    localStorage.removeItem(\"sidebarCollapsed\");\n    // Call the parent logout handler\n    if (onLogout) {\n      onLogout();\n    }\n  };\n\n  return (\n    <div className={`fixed left-0 top-0 h-full bg-white shadow-lg flex flex-col transition-all duration-300 ${isCollapsed ? 'w-20' : 'w-64'}`}>\n      {/* Logo Section with Toggle Button */}\n      <div className=\"p-6 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          {!isCollapsed ? (\n            <>\n              <div className=\"flex items-center gap-3\">\n                <span>\n                  <img src=\"/vercel.svg\" alt=\"Logo\" style={{ width: '24px', height: '24px' }} />\n                </span>\n                <span className=\"font-bold text-xl text-gray-800\">\n                  Rural Pulse\n                </span>\n              </div>\n              <button\n                onClick={toggleSidebar}\n                className=\"bg-gray-100 text-gray-700 rounded-md p-1.5 hover:bg-gray-200 transition-colors flex-shrink-0\"\n              >\n                <svg \n                  className=\"w-5 h-5\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 19l-7-7 7-7m8 14l-7-7 7-7\" />\n                </svg>\n              </button>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center w-full gap-5\">\n              <span>\n                <img src=\"/vercel.svg \" alt=\"Rural Pulse Logo\" style={{ width: '24px', height: '30px' }} />\n              </span>\n              <button\n                onClick={toggleSidebar}\n                className=\"bg-gray-100 text-gray-700 rounded-md p-1.5 hover:bg-gray-200 transition-colors\"\n              >\n                <svg \n                  className=\"w-4 h-4\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Navigation Menu */}\n      <nav className=\"flex-1 py-6\">\n        {menuItems.map((item) => (\n          <button\n            key={item.path}\n            onClick={() => handleMenuClick(item)}\n            className={`w-full flex items-center gap-3 px-6 py-3 text-left transition-colors ${\n              item.disabled\n                ? \"text-gray-400 cursor-not-allowed opacity-50\"\n                : isActive(item.path)\n                ? \"bg-green-50 text-green-700 border-r-4 border-green-700 font-semibold\"\n                : \"text-gray-700 hover:bg-gray-50\"\n            }`}\n            title={isCollapsed ? item.name : ''}\n            disabled={item.disabled}\n          >\n            <span className=\"text-xl\">{item.icon}</span>\n            {!isCollapsed && <span>{item.name}</span>}\n          </button>\n        ))}\n      </nav>\n\n      {/* User Profile Section */}\n      <div className={`border-t border-gray-200 ${isCollapsed ? 'p-3' : 'p-6'}`}>\n        {!isCollapsed ? (\n          <>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                <span className=\"text-green-700 font-bold text-lg\">\n                  {profile?.username?.charAt(0).toUpperCase() || \"U\"}\n                </span>\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"font-semibold text-gray-800 text-sm\">\n                  {profile?.username || \"User\"}\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  {profile?.email || \"\"}\n                </p>\n              </div>\n            </div>\n\n            <button\n              onClick={handleLogout}\n              className=\"w-full bg-green-50 text-green-600 hover:bg-green-100 font-semibold px-4 py-2 rounded-md text-sm transition-colors flex items-center gap-2 cursor-pointer\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n              <span>Logout</span>\n            </button>\n          </>\n        ) : (\n          <div className=\"flex flex-col items-center gap-3\">\n            <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n              <span className=\"text-green-700 font-bold text-lg\">\n                {profile?.username?.charAt(0).toUpperCase() || \"U\"}\n              </span>\n            </div>\n\n            <button\n              onClick={handleLogout}\n              className=\"w-10 h-10 bg-green-50 text-green-600 hover:bg-green-100 font-semibold rounded-md transition-colors flex items-center justify-center flex-shrink-0 cursor-pointer\"\n              title=\"Logout\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/shared/toast.js"],"sourcesContent":["import React from \"react\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport Image from \"next/image\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"../../app/style/toast-custom.css\";\n\nexport function showToast(message, type = \"info\") {\n  const ToastContent = () => (\n    <div className=\"toast-wrapper\">\n      {/* Large Mascot Image Outside */}\n      <div className=\"toast-mascot\">\n        <Image\n          src=\"/AG - success.png\"\n          alt=\"Mascot\"\n          width={120}\n          height={120}\n          className=\"object-contain\"\n          unoptimized\n        />\n      </div>\n      \n      {/* Toast Box with Message */}\n      <div className=\"toast-content\">\n        <p className=\"text-sm font-medium\">{message}</p>\n      </div>\n    </div>\n  );\n\n  toast[type](<ToastContent />, {\n    position: \"bottom-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined,\n    theme: \"light\",\n    icon: false,\n    style: { backgroundColor: \"transparent\", padding: \"0\", boxShadow: \"none\" },\n  });\n}\n\nexport function ToastRoot() {\n  return <ToastContainer position=\"bottom-right\" />;\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;;;AAIO,SAAS,UAAU,OAAO,EAAE,OAAO,MAAM;IAC9C,MAAM,eAAe,kBACnB,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,wIAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,WAAU;wBACV,WAAW;;;;;;;;;;;8BAKf,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAuB;;;;;;;;;;;;;;;;;IAK1C,4JAAK,CAAC,KAAK,eAAC,8OAAC;;;;cAAiB;QAC5B,UAAU;QACV,WAAW;QACX,iBAAiB;QACjB,cAAc;QACd,cAAc;QACd,WAAW;QACX,UAAU;QACV,OAAO;QACP,MAAM;QACN,OAAO;YAAE,iBAAiB;YAAe,SAAS;YAAK,WAAW;QAAO;IAC3E;AACF;AAEO,SAAS;IACd,qBAAO,8OAAC,qKAAc;QAAC,UAAS;;;;;;AAClC","debugId":null}},
    {"offset": {"line": 525, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/utils/apiConfig.js"],"sourcesContent":["// utils/apiConfig.js\r\n\r\nexport const BASE_API_URL = \"http://localhost:3000\";\r\nexport const STRAPI_URL = \"http://localhost:1337\";\r\n\r\n// API Endpoints\r\nexport const ENDPOINTS = {\r\n    LOGIN: `${BASE_API_URL}/auth/login`,\r\n  PRODUCTS: `${BASE_API_URL}/products`,\r\n  DELETE_PRODUCT: (id) => `${BASE_API_URL}/products/${id}`,\r\n  UPLOAD: `${STRAPI_URL}/api/upload`\r\n};\r\n"],"names":[],"mappings":"AAAA,qBAAqB;;;;;;;;;AAEd,MAAM,eAAe;AACrB,MAAM,aAAa;AAGnB,MAAM,YAAY;IACrB,OAAO,GAAG,aAAa,WAAW,CAAC;IACrC,UAAU,GAAG,aAAa,SAAS,CAAC;IACpC,gBAAgB,CAAC,KAAO,GAAG,aAAa,UAAU,EAAE,IAAI;IACxD,QAAQ,GAAG,WAAW,WAAW,CAAC;AACpC","debugId":null}},
    {"offset": {"line": 546, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/utils/productApi.js"],"sourcesContent":["\r\n// utils/productApi.js\r\n\r\nimport { ENDPOINTS, BASE_API_URL,STRAPI_URL } from \"./apiConfig\";\r\n\r\nexport async function fetchProductsAPI() {\r\n  const res = await fetch(ENDPOINTS.PRODUCTS, {\r\n    method: \"GET\",\r\n    credentials: \"include\",\r\n  });\r\n\r\n  const data = await res.json();\r\n  return data;\r\n}\r\n\r\n/**\r\n * Fetch a single product with all relationships (images, variants, etc)\r\n * @param {string} documentId - Product documentId\r\n * @returns {Object} Product with relationships\r\n */\r\nexport async function fetchProductByIdAPI(documentId) {\r\n  try {\r\n    console.log(\"ðŸ” Fetching product from backend:\", documentId);\r\n    const res = await fetch(\r\n      `${BASE_API_URL}/products/${documentId}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n      }\r\n    );\r\n\r\n    const data = await res.json();\r\n    console.log(\"ðŸ“¦ Product response from backend:\", data);\r\n    \r\n    if (!res.ok || !data.data) {\r\n      throw new Error(data?.error || \"Product not found\");\r\n    }\r\n\r\n    return data.data;\r\n  } catch (err) {\r\n    console.error(\"âŒ Error fetching product:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport function formatProductData(data) {\r\n  // Handle multiple input formats\r\n  let products = [];\r\n  \r\n  if (Array.isArray(data)) {\r\n    products = data;\r\n  } else if (data.products && Array.isArray(data.products)) {\r\n    products = data.products;\r\n  } else if (data.products && typeof data.products === 'object' && !Array.isArray(data.products)) {\r\n    // If products is an object (like { data: [...] }), try to extract array\r\n    products = data.products.data || Object.values(data.products) || [];\r\n  }\r\n  \r\n  return products.map((p) => {\r\n    const images = (p.image || []).map((img) => {\r\n      // Check if it's a video by looking at the mime type or file extension\r\n      const isVideo = img.mime?.startsWith('video/') || /\\.(mp4|webm|ogg)$/i.test(img.url || '');\r\n      \r\n      if (isVideo) {\r\n        // For videos, use the full URL directly\r\n        return `${STRAPI_URL}${img.url}`;\r\n      } else {\r\n        // For images, try to use thumbnail, fallback to full URL\r\n        const imageUrl = img.formats?.thumbnail?.url || img.url;\r\n        return `${STRAPI_URL}${imageUrl}`;\r\n      }\r\n    });\r\n\r\n    return {\r\n      ...p,\r\n      images: images.length > 0 ? images : [\"/no-image.png\"],\r\n    };\r\n  });\r\n}\r\n\r\n\r\nexport async function deleteProductAPI(prodId) {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const res = await fetch(ENDPOINTS.DELETE_PRODUCT(prodId), {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n\r\n  return res.json();\r\n}\r\n\r\nexport async function uploadFiles(files) {\r\n  const formData = new FormData();\r\n  files.forEach((file) => formData.append(\"files\", file));\r\n\r\n  const res = await fetch(ENDPOINTS.UPLOAD, {\r\n    method: \"POST\",\r\n    body: formData,\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const error = await res.text();\r\n    throw new Error(\"Image upload failed: \" + error);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\n// Upload files to Strapi media library directly\r\nexport async function uploadToStrapiMediaLibrary(files) {\r\n  const formData = new FormData();\r\n  files.forEach((file) => {\r\n    formData.append(\"files\", file);\r\n  });\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const res = await fetch(`${STRAPI_URL}/api/upload`, {\r\n    method: \"POST\",\r\n    body: formData,\r\n    headers: {\r\n      // Don't set Content-Type, let the browser set it with boundary\r\n      // Authorization: `Bearer ${token}`, // Strapi upload might not need auth\r\n    },\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const error = await res.text();\r\n    console.error(\"Strapi upload error:\", error);\r\n    throw new Error(\"Failed to upload to Strapi media library: \" + error);\r\n  }\r\n\r\n  const data = await res.json();\r\n  console.log(\"Strapi upload response:\", data);\r\n  return data;\r\n}\r\n\r\nexport async function createProductAPI(payload) {\r\n  const res = await fetch(ENDPOINTS.PRODUCTS, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    credentials: \"include\",\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    throw new Error(data?.error || \"Failed to create product\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport async function updateProductAPI(documentId, formDataToSend) {\r\n  const token = localStorage.getItem(\"token\");\r\n  \r\n  const res = await fetch(`${BASE_API_URL}/products/update/${documentId}`, {\r\n    method: \"PUT\",\r\n    body: formDataToSend,\r\n    credentials: \"include\",\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    console.error(\"Update error:\", data);\r\n    throw new Error(data.details || data.message || data.error || \"Product update failed\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n// ============================================================================\r\n// PRODUCT VARIANT API FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Fetch all product variants\r\n */\r\nexport async function fetchVariantsAPI() {\r\n  try {\r\n    console.log(\"ðŸ”„ Fetching variants from:\", `${BASE_API_URL}/variants`);\r\n    const res = await fetch(`${BASE_API_URL}/variants`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    console.log(\"ðŸ“‹ Variants response:\", data);\r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to fetch variants\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"âŒ Error fetching variants:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Create a new product variant (always published)\r\n * @param {Object} variantData - Variant data to create\r\n * @returns {Object} Created variant response from Strapi\r\n */\r\nexport async function createVariantAPI(variantData) {\r\n  try {\r\n    console.log(\"ðŸ†• Creating variant:\", variantData);\r\n    const payload = {\r\n      variant_name: variantData.variant_name,\r\n      variety_type: variantData.variety_type,\r\n      grade: variantData.grade,\r\n      brand: variantData.brand,\r\n      weight: variantData.weight,\r\n      weight_unit: variantData.weight_unit,\r\n      size: variantData.size,\r\n      style: variantData.style,\r\n      package_type: variantData.package_type,\r\n      stock_qty: variantData.stock_qty,\r\n      Store_keeping_Unit: variantData.Store_keeping_Unit,\r\n      barcode: variantData.barcode,\r\n    };\r\n\r\n    console.log(\"ðŸ“¤ Sending payload to POST /variants?status=published\", payload);\r\n    const res = await fetch(`${BASE_API_URL}/variants?status=published`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n    console.log(\"âœ… Variant created response:\", data);\r\n\r\n    if (!res.ok) {\r\n      console.error(\"âŒ Create variant error:\", data);\r\n      throw new Error(data?.error?.message || data?.error || \"Failed to create variant\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"âŒ Exception in createVariantAPI:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Update an existing product variant (always published)\r\n * @param {string} documentId - Document ID of variant to update\r\n * @param {Object} variantData - Updated variant data\r\n * @returns {Object} Updated variant response from Strapi\r\n */\r\nexport async function updateVariantAPI(documentId, variantData) {\r\n  try {\r\n    console.log(\"ðŸ“ Updating variant:\", documentId);\r\n    const payload = {\r\n      variant_name: variantData.variant_name,\r\n      variety_type: variantData.variety_type,\r\n      grade: variantData.grade,\r\n      brand: variantData.brand,\r\n      weight: variantData.weight,\r\n      weight_unit: variantData.weight_unit,\r\n      size: variantData.size,\r\n      style: variantData.style,\r\n      package_type: variantData.package_type,\r\n      stock_qty: variantData.stock_qty,\r\n      Store_keeping_Unit: variantData.Store_keeping_Unit,\r\n      barcode: variantData.barcode,\r\n    };\r\n\r\n    const url = `${BASE_API_URL}/variants/${documentId}?status=published`;\r\n\r\n    const res = await fetch(url, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n    console.log(\"âœ… Variant updated:\", data);\r\n\r\n    if (!res.ok) {\r\n      console.error(\"âŒ Update variant error:\", data);\r\n      throw new Error(data?.error?.message || data?.error || \"Failed to update variant\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"âŒ Error in updateVariantAPI:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a product variant\r\n * @param {string} documentId - Document ID of variant to delete\r\n * @returns {Object} Delete response from Strapi\r\n */\r\nexport async function deleteVariantAPI(documentId) {\r\n  const res = await fetch(`${BASE_API_URL}/variants/${documentId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    credentials: \"include\",\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    console.error(\"Delete variant error:\", data);\r\n    throw new Error(data?.error?.message || data?.error || \"Failed to delete variant\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 823, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/products/Product.js"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\n\r\nimport Sidebar from \"../shared/Sidebar\";\r\n// import EditProduct from \"../editProduct/EditProduct\";\r\nimport \"../../app/style/Product.css\";\r\nimport { showToast } from \"../shared/toast\";\r\nimport { FiEdit, FiTrash2 } from \"react-icons/fi\";\r\n\r\n// Import API handlers\r\nimport {\r\n  fetchProductsAPI,\r\n  formatProductData,\r\n  deleteProductAPI,\r\n} from \"../../utils/productApi\";\r\n\r\nexport default function ProductsDashboard() {\r\n  const router = useRouter();\r\n\r\n  const [profile, setProfile] = useState(null);\r\n  const [products, setProducts] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filterSearch, setFilterSearch] = useState(\"\"); // Search within filter\r\n  const [filterStatus, setFilterStatus] = useState(\"all\"); // all, draft, published\r\n  const [showFilterDropdown, setShowFilterDropdown] = useState(false);\r\n  // const [editingProduct, setEditingProduct] = useState(null);\r\n  const [deleteModal, setDeleteModal] = useState({ open: false, prodId: null });\r\n  const [expandedDesc, setExpandedDesc] = useState({});\r\n\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(() => {\r\n    if (typeof window !== \"undefined\") {\r\n      const saved = localStorage.getItem(\"sidebarCollapsed\");\r\n      return saved !== null ? JSON.parse(saved) : false;\r\n    }\r\n    return false;\r\n  });\r\n\r\n  const [previewImages, setPreviewImages] = useState([]);\r\n  const [imageIndex, setImageIndex] = useState({});\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // LOAD USER PROFILE\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem(\"user\");\r\n    if (userData) {\r\n      try {\r\n        const parsedUser = JSON.parse(userData);\r\n        setProfile(parsedUser);\r\n      } catch (err) {\r\n        console.error(\"Failed to parse user data:\", err);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // LOAD PRODUCTS\r\n  useEffect(() => {\r\n    const loadProducts = async () => {\r\n      try {\r\n        const data = await fetchProductsAPI();\r\n        \r\n        // Backend now handles merging and filtering - just format the products array\r\n        const formattedProducts = formatProductData(data.products || []);\r\n        \r\n        // Sort by createdAt or updatedAt descending\r\n        const sortedProducts = formattedProducts.sort((a, b) => {\r\n          if (a.createdAt && b.createdAt) {\r\n            return new Date(b.createdAt) - new Date(a.createdAt);\r\n          }\r\n          if (a.updatedAt && b.updatedAt) {\r\n            return new Date(b.updatedAt) - new Date(a.updatedAt);\r\n          }\r\n          // fallback: sort by documentId as number descending\r\n          const aId = Number(a.documentId);\r\n          const bId = Number(b.documentId);\r\n          if (!isNaN(aId) && !isNaN(bId)) {\r\n            return bId - aId;\r\n          }\r\n          // fallback: string compare\r\n          return (b.documentId || '').toString().localeCompare((a.documentId || '').toString());\r\n        });\r\n        setProducts(sortedProducts);\r\n      } catch (err) {\r\n        setError(\"Failed to load products\");\r\n      }\r\n    };\r\n\r\n    loadProducts();\r\n  }, []);\r\n\r\n  // Move newly created or edited product to the top and re-sort\r\n  const moveProductToTop = (product) => {\r\n    setProducts((prev) => {\r\n      // Remove if already exists (edit case)\r\n      const filtered = prev.filter((p) => p.documentId !== product.documentId);\r\n      const newList = [product, ...filtered];\r\n      // Sort by createdAt or documentId descending\r\n      return newList.sort((a, b) => {\r\n        if (a.createdAt && b.createdAt) {\r\n          return new Date(b.createdAt) - new Date(a.createdAt);\r\n        }\r\n        if (a.updatedAt && b.updatedAt) {\r\n          return new Date(b.updatedAt) - new Date(a.updatedAt);\r\n        }\r\n        const aId = Number(a.documentId);\r\n        const bId = Number(b.documentId);\r\n        if (!isNaN(aId) && !isNaN(bId)) {\r\n          return bId - aId;\r\n        }\r\n        return (b.documentId || '').toString().localeCompare((a.documentId || '').toString());\r\n      });\r\n    });\r\n  };\r\n\r\n  const toggleDescription = (id) => {\r\n  setExpandedDesc((prev) => ({\r\n    ...prev,\r\n    [id]: !prev[id],\r\n  }));\r\n};\r\n\r\n\r\n\r\n  // SEARCH AND FILTER\r\n  let filteredProducts = products.filter((prod) => {\r\n    // Search filter\r\n    const matchesSearch = prod.name?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    // Status filter (draft, published, modified, or all)\r\n    let matchesStatus = true;\r\n    if (filterStatus === \"draft\") {\r\n      matchesStatus = prod.status === \"draft\";\r\n    } else if (filterStatus === \"published\") {\r\n      matchesStatus = prod.status === \"published\";\r\n    } else if (filterStatus === \"modified\") {\r\n      matchesStatus = prod.status === \"modified\";\r\n    }\r\n    // If filterStatus === \"all\", matchesStatus remains true\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const searchedProducts = filteredProducts;\r\n\r\n  // PAGINATION\r\n  const PRODUCTS_PER_PAGE = 6;\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const totalPages = Math.ceil(searchedProducts.length / PRODUCTS_PER_PAGE);\r\n  const paginatedProducts = searchedProducts\r\n    .slice((currentPage - 1) * PRODUCTS_PER_PAGE, currentPage * PRODUCTS_PER_PAGE);\r\n\r\n  const handlePageChange = (page) => {\r\n    if (page >= 1 && page <= totalPages) setCurrentPage(page);\r\n  };\r\n\r\n  // LOGOUT\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    router.push(\"/signin\");\r\n  };\r\n\r\n  // DELETE\r\n  const handleDelete = async (prodId) => {\r\n    // Remove window.confirm, use toast for notification only\r\n    // Optionally, you can implement a custom modal for confirmation in the future\r\n    // For now, just delete immediately and show toast\r\n    try {\r\n      const res = await deleteProductAPI(prodId);\r\n      if (res.status === \"success\") {\r\n        setProducts((prev) => prev.filter((p) => p.documentId !== prodId));\r\n        showToast(\"Product deleted successfully!\", \"success\");\r\n      } else {\r\n        showToast(\"Delete failed: \" + res.message, \"error\");\r\n      }\r\n    } catch (err) {\r\n      showToast(\"Error deleting product\", \"error\");\r\n    } finally {\r\n      setDeleteModal({ open: false, prodId: null });\r\n    }\r\n  };\r\n\r\n  // Listen for product add/edit events (assumes ProductForm or API triggers a custom event)\r\n  useEffect(() => {\r\n    const handler = (e) => {\r\n      if (e.detail && e.detail.product) {\r\n        moveProductToTop(e.detail.product);\r\n      }\r\n    };\r\n    window.addEventListener(\"product-updated\", handler);\r\n    return () => window.removeEventListener(\"product-updated\", handler);\r\n  }, []);\r\n\r\n  // Close filter dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (showFilterDropdown && !e.target.closest('.filter-dropdown-container')) {\r\n        setShowFilterDropdown(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    return () => document.removeEventListener(\"click\", handleClickOutside);\r\n  }, [showFilterDropdown]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex\">\r\n      {/* SIDEBAR */}\r\n      <Sidebar \r\n        profile={profile} \r\n        onLogout={handleLogout}\r\n        onCollapseChange={setSidebarCollapsed}\r\n      />\r\n\r\n      {/* MAIN CONTENT */}\r\n      <div \r\n        className=\"flex-1 transition-all duration-300\" \r\n        style={{ marginLeft: sidebarCollapsed ? '80px' : '256px' }}\r\n      >\r\n        <div className=\"max-w-8xl mx-5 px-6 py-8\">\r\n\r\n        {/* Sticky Header and Search */}\r\n        <div className=\"sticky top-0 z-20 bg-gray-50 pb-2\">\r\n           <div className=\"flex items-center justify-between mb-2 pt-2\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold\">Product Management</h1>\r\n              <p className=\"text-gray-600\">\r\n                Manage your AgChem product catalog\r\n              </p>\r\n            </div>\r\n            {products.length > 0 && (\r\n              <button\r\n                className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors text-white !text-white flex items-center justify-center cursor-pointer font-semibold text-sm h-12\"\r\n                style={{color: '#fff'}}\r\n                onClick={() => router.push(\"/add-product\")}\r\n              >\r\n                + Add New Product\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"bg-white p-4 rounded-lg flex gap-4 items-center justify-between mb-2\">\r\n            <input\r\n              placeholder=\"Search products...\"\r\n              className=\"border p-2 rounded w-64\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n            \r\n            {/* Filter Dropdown */}\r\n            <div className=\"relative filter-dropdown-container\">\r\n              <button\r\n                onClick={() => setShowFilterDropdown(!showFilterDropdown)}\r\n                className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded flex items-center gap-2 transition-colors text-white !text-white font-semibold text-sm h-10\"\r\n                style={{color: '#fff'}}\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\" />\r\n                </svg>\r\n                Filter\r\n              </button>\r\n              \r\n              {showFilterDropdown && (\r\n                <div className=\"absolute right-0 top-full mt-1 bg-white border border-gray-300 rounded shadow-lg z-10 w-56\">\r\n                  {/* Search within filter */}\r\n                  <div className=\"p-3 border-b\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Search filters...\"\r\n                      className=\"w-full border p-2 rounded text-sm\"\r\n                      value={filterSearch}\r\n                      onChange={(e) => setFilterSearch(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  {/* Status Filter */}\r\n                  <div className=\"p-3\">\r\n                    <p className=\"text-sm font-semibold text-gray-700 mb-2\">Status</p>\r\n                    <div className=\"space-y-1\">\r\n                      {[\"All Products\", \"Draft\", \"Published\", \"Modified\"].filter(option =>\r\n                        option.toLowerCase().includes(filterSearch.toLowerCase())\r\n                      ).map((option) => {\r\n                        const statusValue = option === \"All Products\" ? \"all\" : option.toLowerCase();\r\n                        return (\r\n                          <button\r\n                            key={option}\r\n                            onClick={() => { setFilterStatus(statusValue); setShowFilterDropdown(false); }}\r\n                            className={`block w-full text-left px-3 py-2 rounded text-sm ${filterStatus === statusValue ? \"bg-green-100 text-green-700 font-semibold\" : \"hover:bg-gray-100\"}`}\r\n                          >\r\n                            {option}\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <p className=\"text-gray-600 text-sm mb-2\">\r\n            Showing {searchedProducts.length} of {products.length} products\r\n          </p>\r\n        </div>\r\n\r\n        {/* PRODUCTS GRID WITH PAGINATION AND SCROLL */}\r\n        <div className=\"relative\">\r\n          {/* Product grid scroll area starts below header/search */}\r\n          <div\r\n            style={{ minHeight: '200px', maxHeight: 'calc(100vh - 260px)', overflowY: 'auto', scrollbarWidth: 'none', msOverflowStyle: 'none' }}\r\n            className=\"hide-scrollbar\"\r\n          >\r\n            {products.length === 0 ? (\r\n              <div  className=\"flex flex-col items-center justify-center w-full\" style={{ minHeight: 'calc(100vh - 260px)' }}>\r\n                <div className=\"flex flex-col items-center justify-center\">\r\n                  <Image\r\n                    src=\"/AG - Add first product.png\"\r\n                    alt=\"Empty products\"\r\n                    width={310}\r\n                    height={200}\r\n                    style={{ maxWidth: '310px', width: '100%', height: 'auto', marginBottom: '8px' }}\r\n                  />\r\n                  <h2 className=\"text-4xl font-bold text-gray-800 mb-3\">Nothing here yet...</h2>\r\n                  <p className=\"text-gray-600 text-lg mb-8\">Looks like products are on vacation.</p>\r\n                  <button\r\n                    onClick={() => router.push(\"/add-product\")}\r\n                    className=\"border border-green-500 bg-transparent text-black px-5 py-3 rounded font-semibold text-lg transition-colors hover:bg-green-700 hover:text-white\"\r\n                  >\r\n                    + Add Product\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className={`grid grid-cols-1 md:grid-cols-3 gap-6 items-stretch`}>\r\n                {\r\n                \r\n                [...paginatedProducts].map((prod) => (\r\n                <div key={prod.documentId} className=\"bg-white shadow p-5 rounded-lg flex flex-col justify-between items-stretch min-h-[420px] h-full w-full max-w-[370px] mx-auto cursor-pointer\" onClick={() => router.push(`/products/view/${prod.documentId}`)}>\r\n                  {/* IMAGE CAROUSEL */}\r\n                  <div className=\"relative h-44 w-full bg-gray-100 rounded-lg flex items-center justify-center\">\r\n                    {/* STATUS BADGE */}\r\n                    <div className=\"absolute top-2 right-2 z-10\">\r\n                      <span className={`px-3 py-1 rounded-full text-xs font-semibold text-white ${\r\n                        prod.status === 'published' ? 'bg-green-600' : \r\n                        prod.status === 'modified' ? 'bg-red-600' : \r\n                        'bg-blue-500'\r\n                      }`}>\r\n                        {prod.status === 'published' ? 'Published' : \r\n                         prod.status === 'modified' ? 'Modified' : \r\n                         'Draft'}\r\n                      </span>\r\n                    </div>\r\n                    {(() => {\r\n                      const currentMedia = prod.images?.[imageIndex[prod.documentId] || 0];\r\n                      const isVideo = currentMedia && /\\.(mp4|webm|ogg)$/i.test(currentMedia);\r\n                      \r\n                      if (!currentMedia) {\r\n                        return <div className=\"text-gray-400\">No media</div>;\r\n                      }\r\n                      \r\n                      if (isVideo) {\r\n                        return (\r\n                          <video\r\n                            src={currentMedia}\r\n                            className=\"h-44 w-full object-contain rounded-lg\"\r\n                            controls\r\n                          />\r\n                        );\r\n                      }\r\n                      \r\n                      return (\r\n                        <Image\r\n                          src={currentMedia}\r\n                          alt={prod.name}\r\n                          width={300}\r\n                          height={176}\r\n                          className=\"h-44 w-full object-contain rounded-lg\"\r\n                          unoptimized\r\n                        />\r\n                      );\r\n                    })()}\r\n                    {prod.images.length > 1 && (\r\n                      <>\r\n                        {/* Left */}\r\n                        <button\r\n                          className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-white p-2 rounded-full shadow-md hover:bg-gray-50 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setImageIndex((prev) => {\r\n                              const current = prev[prod.documentId] || 0;\r\n                              const next = current === 0 ? 0 : current - 1;\r\n                              return {\r\n                                ...prev,\r\n                                [prod.documentId]: next,\r\n                              };\r\n                            });\r\n                          }}\r\n                          disabled={(imageIndex[prod.documentId] || 0) === 0}\r\n                        >\r\n                          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                          </svg>\r\n                        </button>\r\n                        {/* Right */}\r\n                        <button\r\n                          className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-white p-2 rounded-full shadow-md hover:bg-gray-50 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setImageIndex((prev) => {\r\n                              const current = prev[prod.documentId] || 0;\r\n                              const next = current === prod.images.length - 1 ? current : current + 1;\r\n                              return {\r\n                                ...prev,\r\n                                [prod.documentId]: next,\r\n                              };\r\n                            });\r\n                          }}\r\n                          disabled={(imageIndex[prod.documentId] || 0) === prod.images.length - 1}\r\n                        >\r\n                          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                          </svg>\r\n                        </button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  {/* DOT INDICATORS / VIDEO INDICATOR */}\r\n                  {prod.images.length > 1 && (\r\n                    <div className=\"flex justify-center mt-2 space-x-2\">\r\n                      {prod.images.map((media, idx) => {\r\n                        const isVideo = media && /\\.(mp4|webm|ogg)$/i.test(media);\r\n                        return (\r\n                          <button\r\n                            key={idx}\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              setImageIndex(prev => ({ ...prev, [prod.documentId]: idx }));\r\n                            }}\r\n                            className={`w-3 h-3 rounded-full flex items-center justify-center transition-all ${\r\n                              (imageIndex[prod.documentId] || 0) === idx \r\n                                ? \"bg-green-600 scale-125\" \r\n                                : \"bg-gray-300 hover:bg-gray-400\"\r\n                            }`}\r\n                            title={isVideo ? `Video ${idx + 1}` : `Image ${idx + 1}`}\r\n                          >\r\n                            {isVideo && (imageIndex[prod.documentId] || 0) === idx && (\r\n                              <svg className=\"w-2 h-2 text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path d=\"M8 5v14l11-7z\" />\r\n                              </svg>\r\n                            )}\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                  {/* TEXT */}\r\n                  <div className=\"font-bold text-lg mt-2\">\r\n  {prod.name.length > 40 ? prod.name.slice(0, 40) + \"...\" : prod.name}\r\n</div>\r\n\r\n                  <div className=\"text-gray-700 text-sm mt-1\">\r\n  {(() => {\r\n    const text = prod.description || \"\";\r\n    const isLong = text.length > 150;\r\n\r\n    if (!isLong) {\r\n      return text; // Short description\r\n    }\r\n\r\n    const shortText = text.substring(0, 150) + \"...\";\r\n\r\n    return (\r\n      <>\r\n        {expandedDesc[prod.documentId] ? text : shortText}\r\n\r\n        <button\r\n          className=\"text-green-600 font-semibold ml-2\"\r\n          onClick={() => toggleDescription(prod.documentId)}\r\n        >\r\n          {expandedDesc[prod.documentId] ? \"Read Less\" : \"Read More\"}\r\n        </button>\r\n      </>\r\n    );\r\n  })()}\r\n</div>\r\n                  {/* ACTIONS */}\r\n                  <div className=\"flex gap-2 mt-3\">\r\n                    <button\r\n                      className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors text-white !text-white flex items-center justify-center cursor-pointer\"\r\n                      style={{color: '#fff'}}\r\n                      title=\"Edit\"\r\n                      onClick={e => {\r\n                        e.stopPropagation();\r\n                        router.push(`/products/edit/${prod.documentId}`);\r\n                      }}\r\n                    >\r\n                      <FiEdit size={18} />\r\n                    </button>\r\n                    <button\r\n                      className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors text-white !text-white flex items-center justify-center cursor-pointer\"\r\n                      style={{color: '#fff'}}\r\n                      title=\"Delete\"\r\n                      onClick={e => {\r\n                        e.stopPropagation();\r\n                        setDeleteModal({ open: true, prodId: prod.documentId });\r\n                      }}\r\n                    >\r\n                      <FiTrash2 size={18} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            )}\r\n          </div>\r\n          {/* PAGINATION CONTROLS */}\r\n          {totalPages > 1 && (\r\n            <div className=\"flex justify-center items-center gap-2 mt-6\">\r\n              <button\r\n                className=\"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-200\"\r\n                onClick={() => handlePageChange(currentPage - 1)}\r\n                disabled={currentPage === 1}\r\n              >\r\n                Prev\r\n              </button>\r\n              {Array.from({ length: totalPages }, (_, i) => (\r\n                <button\r\n                  key={i}\r\n                  className={`px-3 py-1 rounded ${currentPage === i + 1 ? 'bg-green-600 text-white' : 'bg-gray-200 hover:bg-gray-300'}`}\r\n                  onClick={() => handlePageChange(i + 1)}\r\n                >\r\n                  {i + 1}\r\n                </button>\r\n              ))}\r\n              <button\r\n                className=\"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-200\"\r\n                onClick={() => handlePageChange(currentPage + 1)}\r\n                disabled={currentPage === totalPages}\r\n              >\r\n                Next\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      {/* DELETE CONFIRMATION MODAL */}\r\n      {deleteModal.open && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full border border-gray-200 relative\">\r\n            <button\r\n              className=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl font-bold\"\r\n              onClick={() => setDeleteModal({ open: false, prodId: null })}\r\n              aria-label=\"Close\"\r\n            >\r\n              &times;\r\n            </button>\r\n            <h3 className=\"text-lg font-bold mb-3 text-gray-900\">Delete Confirmation</h3>\r\n            <p className=\"mb-5 text-base text-gray-800\">\r\n              Are you sure that you want to delete the product:\r\n              <span className=\"font-bold text-red-600 ml-1\">\r\n                {products.find(p => p.documentId === deleteModal.prodId)?.name || ''}\r\n              </span>\r\n              ?\r\n            </p>\r\n            <div className=\"flex justify-end gap-3\">\r\n              <button\r\n                className=\"flex items-center gap-2 px-5 py-2 rounded bg-green-600 text-white hover:bg-green-700 font-semibold text-base\"\r\n                onClick={() => handleDelete(deleteModal.prodId)}\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" /></svg>\r\n                Yes\r\n              </button>\r\n              <button\r\n                className=\"flex items-center gap-2 px-5 py-2 rounded bg-green-600 text-white hover:bg-green-700 font-semibold text-base\"\r\n                onClick={() => setDeleteModal({ open: false, prodId: null })}\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                No\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* IMAGE PREVIEW POPUP */}\r\n      {previewImages.length > 0 && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white p-4 rounded-lg max-w-xl w-full relative\">\r\n            <button\r\n              onClick={() => setPreviewImages([])}\r\n              className=\"absolute top-2 right-2 text-gray-700 font-bold\"\r\n            >\r\n              âœ•\r\n            </button>\r\n\r\n            <div className=\"flex items-center justify-center gap-2\">\r\n              {previewImages.map((img, index) => (\r\n                <Image\r\n                  key={index}\r\n                  src={img}\r\n                  width={400}\r\n                  height={256}\r\n                  className=\"h-64 w-auto rounded-lg\"\r\n                  alt=\"Product preview\"\r\n                  unoptimized\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}