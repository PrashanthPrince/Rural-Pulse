{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/utils/apiConfig.js"],"sourcesContent":["// utils/apiConfig.js\r\n\r\nexport const BASE_API_URL = \"http://localhost:3000\";\r\nexport const STRAPI_URL = \"http://localhost:1337\";\r\n\r\n// API Endpoints\r\nexport const ENDPOINTS = {\r\n    LOGIN: `${BASE_API_URL}/auth/login`,\r\n  PRODUCTS: `${BASE_API_URL}/products`,\r\n  DELETE_PRODUCT: (id) => `${BASE_API_URL}/products/${id}`,\r\n  UPLOAD: `${STRAPI_URL}/api/upload`\r\n};\r\n"],"names":[],"mappings":"AAAA,qBAAqB;;;;;;;;;AAEd,MAAM,eAAe;AACrB,MAAM,aAAa;AAGnB,MAAM,YAAY;IACrB,OAAO,GAAG,aAAa,WAAW,CAAC;IACrC,UAAU,GAAG,aAAa,SAAS,CAAC;IACpC,gBAAgB,CAAC,KAAO,GAAG,aAAa,UAAU,EAAE,IAAI;IACxD,QAAQ,GAAG,WAAW,WAAW,CAAC;AACpC","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/utils/productApi.js"],"sourcesContent":["\r\n// utils/productApi.js\r\n\r\nimport { ENDPOINTS, BASE_API_URL,STRAPI_URL } from \"./apiConfig\";\r\n\r\nexport async function fetchProductsAPI() {\r\n  const res = await fetch(ENDPOINTS.PRODUCTS, {\r\n    method: \"GET\",\r\n    credentials: \"include\",\r\n  });\r\n\r\n  const data = await res.json();\r\n  return data;\r\n}\r\n\r\n/**\r\n * Fetch a single product with all relationships (images, variants, etc)\r\n * @param {string} documentId - Product documentId\r\n * @returns {Object} Product with relationships\r\n */\r\nexport async function fetchProductByIdAPI(documentId) {\r\n  try {\r\n    console.log(\"üîç Fetching product from backend:\", documentId);\r\n    const res = await fetch(\r\n      `${BASE_API_URL}/products/${documentId}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n      }\r\n    );\r\n\r\n    const data = await res.json();\r\n    console.log(\"üì¶ Product response from backend:\", data);\r\n    \r\n    if (!res.ok || !data.data) {\r\n      throw new Error(data?.error || \"Product not found\");\r\n    }\r\n\r\n    return data.data;\r\n  } catch (err) {\r\n    console.error(\"‚ùå Error fetching product:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport function formatProductData(data) {\r\n  // Handle multiple input formats\r\n  let products = [];\r\n  \r\n  if (Array.isArray(data)) {\r\n    products = data;\r\n  } else if (data.products && Array.isArray(data.products)) {\r\n    products = data.products;\r\n  } else if (data.products && typeof data.products === 'object' && !Array.isArray(data.products)) {\r\n    // If products is an object (like { data: [...] }), try to extract array\r\n    products = data.products.data || Object.values(data.products) || [];\r\n  }\r\n  \r\n  return products.map((p) => {\r\n    const images = (p.image || []).map((img) => {\r\n      // Check if it's a video by looking at the mime type or file extension\r\n      const isVideo = img.mime?.startsWith('video/') || /\\.(mp4|webm|ogg)$/i.test(img.url || '');\r\n      \r\n      if (isVideo) {\r\n        // For videos, use the full URL directly\r\n        return `${STRAPI_URL}${img.url}`;\r\n      } else {\r\n        // For images, try to use thumbnail, fallback to full URL\r\n        const imageUrl = img.formats?.thumbnail?.url || img.url;\r\n        return `${STRAPI_URL}${imageUrl}`;\r\n      }\r\n    });\r\n\r\n    return {\r\n      ...p,\r\n      images: images.length > 0 ? images : [\"/no-image.png\"],\r\n    };\r\n  });\r\n}\r\n\r\n\r\nexport async function deleteProductAPI(prodId) {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const res = await fetch(ENDPOINTS.DELETE_PRODUCT(prodId), {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n\r\n  return res.json();\r\n}\r\n\r\nexport async function uploadFiles(files) {\r\n  const formData = new FormData();\r\n  files.forEach((file) => formData.append(\"files\", file));\r\n\r\n  const res = await fetch(ENDPOINTS.UPLOAD, {\r\n    method: \"POST\",\r\n    body: formData,\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const error = await res.text();\r\n    throw new Error(\"Image upload failed: \" + error);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\n// Upload files to Strapi media library directly\r\nexport async function uploadToStrapiMediaLibrary(files) {\r\n  const formData = new FormData();\r\n  files.forEach((file) => {\r\n    formData.append(\"files\", file);\r\n  });\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const res = await fetch(`${STRAPI_URL}/api/upload`, {\r\n    method: \"POST\",\r\n    body: formData,\r\n    headers: {\r\n      // Don't set Content-Type, let the browser set it with boundary\r\n      // Authorization: `Bearer ${token}`, // Strapi upload might not need auth\r\n    },\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const error = await res.text();\r\n    console.error(\"Strapi upload error:\", error);\r\n    throw new Error(\"Failed to upload to Strapi media library: \" + error);\r\n  }\r\n\r\n  const data = await res.json();\r\n  console.log(\"Strapi upload response:\", data);\r\n  return data;\r\n}\r\n\r\nexport async function createProductAPI(payload) {\r\n  const res = await fetch(ENDPOINTS.PRODUCTS, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    credentials: \"include\",\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    throw new Error(data?.error || \"Failed to create product\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport async function updateProductAPI(documentId, formDataToSend) {\r\n  const token = localStorage.getItem(\"token\");\r\n  \r\n  const res = await fetch(`${BASE_API_URL}/products/update/${documentId}`, {\r\n    method: \"PUT\",\r\n    body: formDataToSend,\r\n    credentials: \"include\",\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    console.error(\"Update error:\", data);\r\n    throw new Error(data.details || data.message || data.error || \"Product update failed\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n// ============================================================================\r\n// PRODUCT VARIANT API FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Fetch all product variants\r\n */\r\nexport async function fetchVariantsAPI() {\r\n  try {\r\n    console.log(\"üîÑ Fetching variants from:\", `${BASE_API_URL}/variants`);\r\n    const res = await fetch(`${BASE_API_URL}/variants`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    console.log(\"üìã Variants response:\", data);\r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to fetch variants\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"‚ùå Error fetching variants:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Create a new product variant (always published)\r\n * @param {Object} variantData - Variant data to create\r\n * @returns {Object} Created variant response from Strapi\r\n */\r\nexport async function createVariantAPI(variantData) {\r\n  try {\r\n    console.log(\"üÜï Creating variant:\", variantData);\r\n    const payload = {\r\n      variant_name: variantData.variant_name,\r\n      variety_type: variantData.variety_type,\r\n      grade: variantData.grade,\r\n      brand: variantData.brand,\r\n      weight: variantData.weight,\r\n      weight_unit: variantData.weight_unit,\r\n      size: variantData.size,\r\n      style: variantData.style,\r\n      package_type: variantData.package_type,\r\n      stock_qty: variantData.stock_qty,\r\n      Store_keeping_Unit: variantData.Store_keeping_Unit,\r\n      barcode: variantData.barcode,\r\n    };\r\n\r\n    console.log(\"üì§ Sending payload to POST /variants?status=published\", payload);\r\n    const res = await fetch(`${BASE_API_URL}/variants?status=published`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n    console.log(\"‚úÖ Variant created response:\", data);\r\n\r\n    if (!res.ok) {\r\n      console.error(\"‚ùå Create variant error:\", data);\r\n      throw new Error(data?.error?.message || data?.error || \"Failed to create variant\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"‚ùå Exception in createVariantAPI:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Update an existing product variant (always published)\r\n * @param {string} documentId - Document ID of variant to update\r\n * @param {Object} variantData - Updated variant data\r\n * @returns {Object} Updated variant response from Strapi\r\n */\r\nexport async function updateVariantAPI(documentId, variantData) {\r\n  try {\r\n    console.log(\"üìù Updating variant:\", documentId);\r\n    const payload = {\r\n      variant_name: variantData.variant_name,\r\n      variety_type: variantData.variety_type,\r\n      grade: variantData.grade,\r\n      brand: variantData.brand,\r\n      weight: variantData.weight,\r\n      weight_unit: variantData.weight_unit,\r\n      size: variantData.size,\r\n      style: variantData.style,\r\n      package_type: variantData.package_type,\r\n      stock_qty: variantData.stock_qty,\r\n      Store_keeping_Unit: variantData.Store_keeping_Unit,\r\n      barcode: variantData.barcode,\r\n    };\r\n\r\n    const url = `${BASE_API_URL}/variants/${documentId}?status=published`;\r\n\r\n    const res = await fetch(url, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n    console.log(\"‚úÖ Variant updated:\", data);\r\n\r\n    if (!res.ok) {\r\n      console.error(\"‚ùå Update variant error:\", data);\r\n      throw new Error(data?.error?.message || data?.error || \"Failed to update variant\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"‚ùå Error in updateVariantAPI:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a product variant\r\n * @param {string} documentId - Document ID of variant to delete\r\n * @returns {Object} Delete response from Strapi\r\n */\r\nexport async function deleteVariantAPI(documentId) {\r\n  const res = await fetch(`${BASE_API_URL}/variants/${documentId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    credentials: \"include\",\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    console.error(\"Delete variant error:\", data);\r\n    throw new Error(data?.error?.message || data?.error || \"Failed to delete variant\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/shared/toast.js"],"sourcesContent":["import React from \"react\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport Image from \"next/image\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"../../app/style/toast-custom.css\";\n\nexport function showToast(message, type = \"info\") {\n  const ToastContent = () => (\n    <div className=\"toast-wrapper\">\n      {/* Large Mascot Image Outside */}\n      <div className=\"toast-mascot\">\n        <Image\n          src=\"/AG - success.png\"\n          alt=\"Mascot\"\n          width={120}\n          height={120}\n          className=\"object-contain\"\n          unoptimized\n        />\n      </div>\n      \n      {/* Toast Box with Message */}\n      <div className=\"toast-content\">\n        <p className=\"text-sm font-medium\">{message}</p>\n      </div>\n    </div>\n  );\n\n  toast[type](<ToastContent />, {\n    position: \"bottom-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined,\n    theme: \"light\",\n    icon: false,\n    style: { backgroundColor: \"transparent\", padding: \"0\", boxShadow: \"none\" },\n  });\n}\n\nexport function ToastRoot() {\n  return <ToastContainer position=\"bottom-right\" />;\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;;;AAIO,SAAS,UAAU,OAAO,EAAE,OAAO,MAAM;IAC9C,MAAM,eAAe,kBACnB,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,wIAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,WAAU;wBACV,WAAW;;;;;;;;;;;8BAKf,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAuB;;;;;;;;;;;;;;;;;IAK1C,4JAAK,CAAC,KAAK,eAAC,8OAAC;;;;cAAiB;QAC5B,UAAU;QACV,WAAW;QACX,iBAAiB;QACjB,cAAc;QACd,cAAc;QACd,WAAW;QACX,UAAU;QACV,OAAO;QACP,MAAM;QACN,OAAO;YAAE,iBAAiB;YAAe,SAAS;YAAK,WAAW;QAAO;IAC3E;AACF;AAEO,SAAS;IACd,qBAAO,8OAAC,qKAAc;QAAC,UAAS;;;;;;AAClC","debugId":null}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/shared/VariantModal.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { createVariantAPI, updateVariantAPI, publishVariantAPI } from \"@/utils/productApi\";\r\nimport { showToast } from \"@/components/shared/toast\";\r\nimport \"@/style/variant.css\";\r\n\r\n/**\r\n * VariantModal Component\r\n * \r\n * Modal for adding/editing product variants\r\n * Includes both Save as Draft and Publish buttons\r\n * \r\n * @param {Object} variant - Variant data for editing (null for add)\r\n * @param {Function} onSave - Callback when variant is saved\r\n * @param {Function} onCancel - Callback to close modal\r\n */\r\nexport default function VariantModal({ variant, onSave, onCancel }) {\r\n  const [formData, setFormData] = useState({\r\n    variant_name: \"\",\r\n    variety_type: \"\",\r\n    grade: \"\",\r\n    brand: \"\",\r\n    weight: \"\",\r\n    weight_unit: \"g\",\r\n    size: \"\",\r\n    style: \"\",\r\n    package_type: \"\",\r\n    stock_qty: \"\",\r\n    Store_keeping_Unit: \"\",\r\n    barcode: \"\",\r\n  });\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Pre-fill form if editing\r\n  useEffect(() => {\r\n    if (variant) {\r\n      setFormData({\r\n        variant_name: variant.variant_name || \"\",\r\n        variety_type: variant.variety_type || \"\",\r\n        grade: variant.grade || \"\",\r\n        brand: variant.brand || \"\",\r\n        weight: variant.weight || \"\",\r\n        weight_unit: variant.weight_unit || \"g\",\r\n        size: variant.size || \"\",\r\n        style: variant.style || \"\",\r\n        package_type: variant.package_type || \"\",\r\n        stock_qty: variant.stock_qty || \"\",\r\n        Store_keeping_Unit: variant.Store_keeping_Unit || \"\",\r\n        barcode: variant.barcode || \"\",\r\n      });\r\n    }\r\n  }, [variant]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: name === \"weight\" || name === \"stock_qty\" ? Number(value) : value,\r\n    }));\r\n    // Clear error for this field\r\n    if (errors[name]) {\r\n      setErrors((prev) => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[name];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!formData.variant_name.trim()) newErrors.variant_name = \"Variant name is required\";\r\n    if (!formData.variety_type.trim()) newErrors.variety_type = \"Variety type is required\";\r\n    if (!formData.grade.trim()) newErrors.grade = \"Grade is required\";\r\n    if (!formData.brand.trim()) newErrors.brand = \"Brand is required\";\r\n    if (!formData.weight) newErrors.weight = \"Weight is required\";\r\n    if (!formData.size.trim()) newErrors.size = \"Size is required\";\r\n    if (!formData.stock_qty) newErrors.stock_qty = \"Stock quantity is required\";\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!validateForm()) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      console.log(\"üíæ Saving variant:\", formData);\r\n      if (variant && variant.documentId) {\r\n        // Update existing variant\r\n        console.log(\"üìù Updating existing variant:\", variant.documentId);\r\n        const response = await updateVariantAPI(variant.documentId, formData);\r\n        console.log(\"‚úÖ Variant updated successfully\");\r\n        const variantData = response.data || response;\r\n        showToast(\"Variant saved successfully\", \"success\");\r\n        onSave({\r\n          ...variant,\r\n          ...formData,\r\n          publishedAt: variantData.publishedAt || new Date().toISOString(),\r\n        });\r\n      } else {\r\n        // Create new variant\r\n        console.log(\"‚ûï Creating new variant\");\r\n        const response = await createVariantAPI(formData);\r\n        console.log(\"‚úÖ Variant created:\", response);\r\n        // Extract variant data from response\r\n        const variantData = response.data || response;\r\n        console.log(\"üì¶ Variant data:\", variantData);\r\n        \r\n        // Return the created variant data to parent with proper ID\r\n        onSave({\r\n          ...formData,\r\n          id: variantData.id,\r\n          documentId: variantData.documentId,\r\n          publishedAt: variantData.publishedAt || new Date().toISOString(),\r\n        });\r\n        showToast(\"Variant saved successfully\", \"success\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"‚ùå Error saving variant:\", err);\r\n      showToast(err.message || \"Failed to save variant\", \"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"variant-modal-overlay\">\r\n      <div className=\"variant-modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h2>{variant ? \"Edit Variant\" : \"Add New Variant\"}</h2>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            disabled={isLoading}\r\n            className=\"btn-close-modal\"\r\n          >\r\n            ‚úï\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-body\">\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label>Variant Name *</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"variant_name\"\r\n                value={formData.variant_name}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Premium Pack\"\r\n                disabled={isLoading}\r\n              />\r\n              {errors.variant_name && (\r\n                <span className=\"error-message\">{errors.variant_name}</span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Variety Type *</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"variety_type\"\r\n                value={formData.variety_type}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Standard, Premium\"\r\n                disabled={isLoading}\r\n              />\r\n              {errors.variety_type && (\r\n                <span className=\"error-message\">{errors.variety_type}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label>Grade *</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"grade\"\r\n                value={formData.grade}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., A, B, C\"\r\n                disabled={isLoading}\r\n              />\r\n              {errors.grade && (\r\n                <span className=\"error-message\">{errors.grade}</span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Brand *</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"brand\"\r\n                value={formData.brand}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Brand Name\"\r\n                disabled={isLoading}\r\n              />\r\n              {errors.brand && (\r\n                <span className=\"error-message\">{errors.brand}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label>Weight *</label>\r\n              <div className=\"weight-input-group\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"weight\"\r\n                  value={formData.weight}\r\n                  onChange={handleChange}\r\n                  placeholder=\"e.g., 100\"\r\n                  disabled={isLoading}\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                />\r\n                <select\r\n                  name=\"weight_unit\"\r\n                  value={formData.weight_unit}\r\n                  onChange={handleChange}\r\n                  disabled={isLoading}\r\n                >\r\n                  <option value=\"g\">g</option>\r\n                  <option value=\"kg\">kg</option>\r\n                  <option value=\"mg\">mg</option>\r\n                  <option value=\"lb\">lb</option>\r\n                  <option value=\"oz\">oz</option>\r\n                </select>\r\n              </div>\r\n              {errors.weight && (\r\n                <span className=\"error-message\">{errors.weight}</span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Size *</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"size\"\r\n                value={formData.size}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Medium, Large\"\r\n                disabled={isLoading}\r\n              />\r\n              {errors.size && (\r\n                <span className=\"error-message\">{errors.size}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label>Style</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"style\"\r\n                value={formData.style}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Box, Pouch, Bottle\"\r\n                disabled={isLoading}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Package Type</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"package_type\"\r\n                value={formData.package_type}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Individual, Bundle\"\r\n                disabled={isLoading}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label>Stock Quantity *</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"stock_qty\"\r\n                value={formData.stock_qty}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., 100\"\r\n                disabled={isLoading}\r\n                min=\"0\"\r\n              />\r\n              {errors.stock_qty && (\r\n                <span className=\"error-message\">{errors.stock_qty}</span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Store Keeping Unit (SKU)</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"Store_keeping_Unit\"\r\n                value={formData.Store_keeping_Unit}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., SKU-001\"\r\n                disabled={isLoading}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label>Barcode</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"barcode\"\r\n                value={formData.barcode}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., 1234567890123\"\r\n                disabled={isLoading}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            disabled={isLoading}\r\n            className=\"btn-modal btn-cancel\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleSave}\r\n            disabled={isLoading}\r\n            className=\"btn-modal btn-publish\"\r\n          >\r\n            {isLoading ? \"Saving...\" : \"Save\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/products/ProductVariant.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport VariantModal from \"@/components/shared/VariantModal\";\r\nimport \"@/style/variant.css\";\r\n\r\n/**\r\n * ProductVariant Component\r\n * \r\n * Displays a list of product variants and allows adding new variants\r\n * This component is used in both Add and Edit product forms\r\n * \r\n * @param {Array} initialVariants - Existing variants from product (for edit mode)\r\n * @param {Function} onVariantsChange - Callback when variants are added/updated\r\n * @param {string} mode - 'add' or 'edit' mode\r\n */\r\nexport default function ProductVariant({\r\n  initialVariants = [],\r\n  onVariantsChange,\r\n  mode = \"add\",\r\n}) {\r\n  console.log(\"üéØ ProductVariant mounted with initialVariants:\", initialVariants);\r\n  const [variants, setVariants] = useState(initialVariants);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingVariant, setEditingVariant] = useState(null);\r\n\r\n  // Sync variants when initialVariants prop changes (for edit mode)\r\n  useEffect(() => {\r\n    console.log(\"üîÑ ProductVariant - initialVariants changed:\", initialVariants);\r\n    setVariants(initialVariants);\r\n  }, [initialVariants]);\r\n\r\n  // Notify parent component of changes\r\n  useEffect(() => {\r\n    console.log(\"üì¶ ProductVariant - Variants updated:\", variants)\r\n    if (onVariantsChange) {\r\n      onVariantsChange(variants);\r\n    }\r\n  }, [variants, onVariantsChange]);\r\n\r\n  const handleAddVariant = () => {\r\n    console.log(\"‚ûï Adding new variant\");\r\n    setEditingVariant(null);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleEditVariant = (variant) => {\r\n    console.log(\"‚úèÔ∏è Editing variant:\", variant);\r\n    setEditingVariant(variant);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleSaveVariant = (variantData) => {\r\n    console.log(\"üíæ Saving variant:\", variantData);\r\n    if (editingVariant) {\r\n      // Update existing variant\r\n      console.log(\"üìù Updating variant with id:\", editingVariant.id);\r\n      setVariants(\r\n        variants.map((v) =>\r\n          v.id === editingVariant.id ? { ...v, ...variantData } : v\r\n        )\r\n      );\r\n    } else {\r\n      // Add new variant with temporary ID\r\n      const newVariant = {\r\n        ...variantData,\r\n        tempId: Date.now(), // Temporary ID for unsaved variants\r\n      };\r\n      console.log(\"‚ûï Adding new variant:\", newVariant);\r\n      setVariants([...variants, newVariant]);\r\n    }\r\n    setShowModal(false);\r\n  };\r\n\r\n  const handleDeleteVariant = (variantId) => {\r\n    console.log(\"üóëÔ∏è Deleting variant:\", variantId);\r\n    setVariants(variants.filter((v) => v.id !== variantId && v.tempId !== variantId));\r\n  };\r\n\r\n  return (\r\n    <div className=\"product-variant-container\">\r\n      <div className=\"variant-header\">\r\n        <h3 className=\"variant-title\">Product Variants</h3>\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleAddVariant}\r\n          className=\"btn-add-variant\"\r\n        >\r\n          + Add Variant\r\n        </button>\r\n      </div>\r\n\r\n      {/* Variants List */}\r\n      <div className=\"variants-list\">\r\n        {variants.length === 0 ? (\r\n          <p className=\"no-variants\">No variants added yet</p>\r\n        ) : (\r\n          variants.map((variant) => (\r\n            <div key={variant.id || variant.tempId} className=\"variant-card\">\r\n              <div className=\"variant-info\">\r\n                <h4 className=\"variant-name\">{variant.variant_name}</h4>\r\n                <div className=\"variant-details\">\r\n                  <span className=\"detail-badge\">\r\n                    <strong>Type:</strong> {variant.variety_type}\r\n                  </span>\r\n                  <span className=\"detail-badge\">\r\n                    <strong>Grade:</strong> {variant.grade}\r\n                  </span>\r\n                  <span className=\"detail-badge\">\r\n                    <strong>Brand:</strong> {variant.brand}\r\n                  </span>\r\n                  <span className=\"detail-badge\">\r\n                    <strong>Weight:</strong> {variant.weight} {variant.weight_unit}\r\n                  </span>\r\n                  <span className=\"detail-badge\">\r\n                    <strong>Size:</strong> {variant.size}\r\n                  </span>\r\n                  <span className=\"detail-badge\">\r\n                    <strong>Stock:</strong> {variant.stock_qty}\r\n                  </span>\r\n                  {variant.barcode && (\r\n                    <span className=\"detail-badge\">\r\n                      <strong>Barcode:</strong> {variant.barcode}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"variant-actions\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => handleEditVariant(variant)}\r\n                  className=\"btn-variant-action btn-edit\"\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => handleDeleteVariant(variant.id || variant.tempId)}\r\n                  className=\"btn-variant-action btn-delete\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* Variant Modal */}\r\n      {showModal && (\r\n        <VariantModal\r\n          variant={editingVariant}\r\n          onSave={handleSaveVariant}\r\n          onCancel={() => setShowModal(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1494, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/shared/ProductForm.js"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { commands } from \"@uiw/react-md-editor\";\nimport { useRef } from \"react\";\nimport { useState as useLocalState } from \"react\";\n\n// Dynamically import MDEditor to avoid SSR issues\nconst MDEditor = dynamic(() => import(\"@uiw/react-md-editor\"), { ssr: false });\nimport Image from \"next/image\";\nimport { STRAPI_URL } from \"@/utils/apiConfig\";\nimport ProductVariant from \"@/components/products/ProductVariant\";\n\n\n/**\n * ============================================================================\n * ProductForm Component - Unified Reusable Form for Add and Edit Product\n * ============================================================================\n * \n * PURPOSE:\n * This is a shared component that handles both adding new products and editing \n * existing products. It manages form inputs, image upload/carousel, and \n * communicates with parent components through callback functions.\n * \n * HOW IT CONNECTS WITH ADD PRODUCT:\n * - Used in: app/add-product/page.js\n * - Mode: 'add'\n * - Initial Data: Empty (no existing product data)\n * - Image Handling: Only new images uploaded by user\n * - On Submit: Sends formData + imageFiles to create new product in Strapi\n * \n * HOW IT CONNECTS WITH EDIT PRODUCT:\n * - Used in: components/editProduct/EditProduct.js\n * - Mode: 'edit'\n * - Initial Data: Contains existing product (name, description, images)\n * - Image Handling: Shows existing Strapi images + allows new uploads\n * - On Submit: Sends formData + existingImages + new imageFiles to update product\n * \n * DATA FLOW:\n * 1. Parent passes initialData (empty for add, populated for edit)\n * 2. Component manages state for form fields and images\n * 3. User interacts with form (edit fields, upload/delete images)\n * 4. On submit, component calls onSubmit callback with all data\n * 5. Parent handles API call to backend (create or update)\n * \n * @param {Object} props\n * @param {Object} props.initialData - Initial form data for editing (optional)\n *        - For ADD mode: {} (empty object)\n *        - For EDIT mode: { name,  description, image: [...] }\n * @param {Function} props.onSubmit - Callback when form submitted\n *        - Receives: { formData, imageFiles, existingImages }\n * @param {Function} props.onCancel - Callback when cancel button clicked\n * @param {boolean} props.isLoading - Shows loading state on save button\n * @param {string} props.mode - 'add' or 'edit' determines UI and behavior\n */\nexport default function ProductForm({ \n  initialData = {}, \n  onSubmit, \n  onCancel, \n  isLoading = false,\n  mode = 'add'\n}) {\n  const [submitAction, setSubmitAction] = useState(null);\n\n  /**\n   * variants: Product variants for this product\n   * - In ADD mode: Starts empty\n   * - In EDIT mode: Pre-filled with existing product variants\n   */\n  const [variants, setVariants] = useState(initialData.product_variants || []);\n\n  // Sync variants when initialData changes (for edit mode)\n  useEffect(() => {\n    console.log(\"üì¶ ProductForm - Initial variants loaded:\", initialData.product_variants);\n    setVariants(initialData.product_variants || []);\n  }, [initialData.product_variants]);\n\n  /**\n   * formData: Stores text input values (name,  description)\n   * - In ADD mode: Starts empty\n   * - In EDIT mode: Pre-filled with existing product data\n   */\n  const [formData, setFormData] = useState({\n    name: initialData.name || \"\",\n    description: initialData.description || \"\",\n    about_item: initialData.about_item || \"\",\n    product_details: initialData.product_details || \"\",\n    safety_information: initialData.safety_information || \"\",\n    usage_directions: initialData.usage_directions || \"\",\n  });\n  const [errors, setErrors] = useState({});\n  const DESCRIPTION_LIMIT = 500;\n\n  /**\n   * imageFiles: Array of File objects for newly uploaded images\n   * - Used when user selects new images from their device\n   * - Sent to backend for upload to Strapi\n   */\n  const [imageFiles, setImageFiles] = useState([]);\n  const [imageTypeError, setImageTypeError] = useState(\"\");\n  const [imageSizeError, setImageSizeError] = useState(\"\");\n  const VIDEO_SIZE_LIMIT = 4 * 1024 * 1024; // 4MB\n  \n  /**\n   * imagePreviews: Array of preview objects for newly uploaded images\n   * - Structure: [{ url: blob URL, name: filename }, ...]\n   * - Used to show preview before upload\n   */\n  const [imagePreviews, setImagePreviews] = useState([]);\n  \n  /**\n   * currentImageIndex: Tracks which image is currently displayed in carousel\n   */\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  \n  /**\n   * existingImages: Array of existing images from Strapi (EDIT mode only)\n   * - Structure: [{ id, url, name }, ...]\n   * - Starts with all images from product\n   * - User can delete images, which removes them from this array\n   * - On submit, only remaining images are kept in product\n   */\n  const [existingImages, setExistingImages] = useState(initialData.image || []);\n\n  /**\n   * selectedSlots: Array of indices indicating which existing image slots are selected for replacement\n   * - Used in EDIT mode only\n   * - When user uploads new images, selected slots will be replaced\n   */\n  const [selectedSlots, setSelectedSlots] = useState([]);\n\n  /**\n   * handleInputChange: Updates form data when user types in input fields\n   */\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    if (name === \"description\") {\n      if (value.length <= DESCRIPTION_LIMIT) {\n        setFormData(prev => ({ ...prev, [name]: value }));\n      }\n    } else {\n      setFormData(prev => ({ ...prev, [name]: value }));\n    }\n  };\n\n  /**\n   * handleDeleteExistingImage: Deletes existing image from product\n   * - Removes from existingImages array\n   * - Adjusts selectedSlots indices\n   */\n  const handleDeleteExistingImage = (index) => {\n    const updated = existingImages.filter((_, i) => i !== index);\n    setExistingImages(updated);\n\n    // Adjust selected slots after deletion\n    setSelectedSlots((prev) =>\n      prev.filter((i) => i !== index).map((i) => (i > index ? i - 1 : i))\n    );\n  };\n\n  /**\n   * handleDeleteNewImage: Deletes newly uploaded image preview\n   */\n  const handleDeleteNewImage = (index) => {\n    setImageFiles((prev) => prev.filter((_, i) => i !== index));\n    setImagePreviews((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  /**\n   * handleSubmit: Called when user clicks Save button\n   * - Prevents default form submission\n   * - Calls parent's onSubmit with all form data\n   * \n   * DATA SENT TO PARENT:\n   * - formData: { name,  description }\n   * - imageFiles: Array of new File objects to upload\n   * - existingImages: Array of existing images to keep (after deletions)\n   * - selectedSlots: Array of indices for slots to replace with new images\n   */\n  const handleSubmit = (e) => {\n    if (e) e.preventDefault();\n    // Validate required fields (ensure string type)\n    const newErrors = {};\n    const name = String(formData.name ?? '');\n    const description = String(formData.description ?? '');\n    const about_item = String(formData.about_item ?? '');\n    const product_details = String(formData.product_details ?? '');\n    const safety_information = String(formData.safety_information ?? '');\n    const usage_directions = String(formData.usage_directions ?? '');\n    // Images validation\n    let imagesCount = 0;\n    if (mode === 'add') {\n      imagesCount = imageFiles.length;\n    } else {\n      imagesCount = (existingImages?.length || 0) + (imageFiles?.length || 0);\n    }\n    if (!name.trim()) newErrors.name = 'Name is required';\n    if (!description.trim()) newErrors.description = 'Description is required';\n    if (!about_item.trim()) newErrors.about_item = 'About Item is required';\n    if (!product_details.trim()) newErrors.product_details = 'Product Details is required';\n    if (!safety_information.trim()) newErrors.safety_information = 'Safety Information is required';\n    if (!usage_directions.trim()) newErrors.usage_directions = 'Usage Directions is required';\n    if (imagesCount === 0) newErrors.images = 'At least one image is required';\n    setErrors(newErrors);\n    if (Object.keys(newErrors).length > 0) return;\n    if (submitAction) {\n      onSubmit({\n        action: submitAction,\n        formData: { ...formData, name, description, about_item, product_details, safety_information, usage_directions },\n        imageFiles,\n        existingImages,\n        selectedSlots,\n        variants\n      });\n      setSubmitAction(null);\n    }\n  };\n\n  /**\n   * handleSubmit: Called when user clicks Save button\n   */\n  const handleImageSelect = (e) => {\n    setImageTypeError(\"\");\n    setImageSizeError(\"\");\n    const files = Array.from(e.target.files || []);\n    const allowedImageTypes = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n    const allowedVideoTypes = [\"video/mp4\", \"video/webm\", \"video/ogg\"];\n    const allowedTypes = [...allowedImageTypes, ...allowedVideoTypes];\n    \n    const invalid = files.find(f => !allowedTypes.includes(f.type));\n    if (invalid) {\n      setImageTypeError(\"Only PNG, JPEG images and MP4, WebM, OGG videos are allowed.\");\n      e.target.value = '';\n      return;\n    }\n    \n    // Check video file size (4MB limit)\n    const oversizedVideo = files.find(f => {\n      if (f.type.startsWith('video/') && f.size > VIDEO_SIZE_LIMIT) {\n        return true;\n      }\n      return false;\n    });\n    \n    if (oversizedVideo) {\n      setImageSizeError(`Video file \"${oversizedVideo.name}\" exceeds 4MB size limit`);\n      e.target.value = '';\n      return;\n    }\n    \n    setImageFiles(files);\n    const previews = files.map(file => ({\n      url: URL.createObjectURL(file),\n      name: file.name,\n      type: file.type.startsWith('video/') ? 'video' : 'image'\n    }));\n    setImagePreviews(previews);\n  };\n\n  /**\n   * Generate preview images with new uploads replacing selected slots\n   * - EDIT mode: Shows existing images with replacements in selected slots\n   * - ADD mode: Just shows the uploaded images\n   */\n  const getDisplayImages = () => {\n    // Helper function to detect if a URL/file is a video\n    const isVideoFile = (item) => {\n      if (item.type === 'video') return true;\n      const url = item.url || '';\n      return /\\.(mp4|webm|ogg|mov|avi|mkv)$/i.test(url);\n    };\n\n    if (mode === 'edit' && existingImages.length > 0) {\n      // Create a copy of existing images, add type property for existing files\n      const preview = [...existingImages].map(img => ({\n        ...img,\n        type: img.type || (isVideoFile(img) ? 'video' : 'image')\n      }));\n      \n      // Replace selected slots with new uploads\n      selectedSlots.forEach((slotIndex, i) => {\n        if (i < imagePreviews.length) {\n          preview[slotIndex] = {\n            ...imagePreviews[i],\n            isNew: true // Mark as new for different display\n          };\n        }\n      });\n      \n      // Append remaining new images\n      if (imagePreviews.length > selectedSlots.length) {\n        preview.push(...imagePreviews.slice(selectedSlots.length).map(img => ({\n          ...img,\n          isNew: true\n        })));\n      }\n      \n      return preview;\n    }\n    // ADD mode: just return imagePreviews (newly uploaded files)\n    return imagePreviews;\n  };\n\n  const displayImages = getDisplayImages();\n\n  /**\n   * nextImage: Navigate to next image in carousel\n   */\n  const nextImage = () => {\n    setCurrentImageIndex((prev) => (prev + 1) % displayImages.length);\n  };\n\n  /**\n   * prevImage: Navigate to previous image in carousel\n   */\n  const prevImage = () => {\n    setCurrentImageIndex((prev) => (prev - 1 + displayImages.length) % displayImages.length);\n  };\n\n  /**\n   * handleRemoveImage: Delete current image from carousel\n   */\n  const handleRemoveImage = (index) => {\n    const displayImages = getDisplayImages();\n    const totalImages = displayImages.length;\n    \n    if (mode === 'edit') {\n      const item = displayImages[index];\n      \n      // If it's a new item (marked with isNew flag)\n      if (item?.isNew) {\n        // Find which preview this corresponds to and remove it\n        const previewIndex = imagePreviews.findIndex(prev => \n          prev.url === item.url && prev.name === item.name\n        );\n        if (previewIndex !== -1) {\n          handleDeleteNewImage(previewIndex);\n          // Remove from selectedSlots if it was a replacement\n          setSelectedSlots(prev => prev.filter(slot => slot !== index));\n        }\n      } else {\n        // It's an existing image from the backend\n        const existingIndex = existingImages.findIndex(img => \n          img.url === item.url || img.id === item.id\n        );\n        if (existingIndex !== -1) {\n          handleDeleteExistingImage(existingIndex);\n        }\n      }\n    } else {\n      // ADD mode: just delete from imagePreviews\n      handleDeleteNewImage(index);\n    }\n    \n    // Reset current index after deletion\n    // Wait for state update to complete, then adjust index\n    setTimeout(() => {\n      const updatedDisplay = getDisplayImages();\n      if (updatedDisplay.length === 0) {\n        setCurrentImageIndex(0);\n      } else if (index >= updatedDisplay.length) {\n        setCurrentImageIndex(updatedDisplay.length - 1);\n      } else if (index > 0) {\n        setCurrentImageIndex(index - 1);\n      }\n    }, 0);\n  };\n\n  \n  // Ref for hidden file input for image upload in markdown\n  const mdImageInputRef = useRef(null);\n\n  // Insert image markdown at cursor position\n  const insertImageMarkdown = (file) => {\n    if (!file) return;\n    \n    // Add the file to imageFiles for actual upload\n    const blob = file;\n    const previewUrl = URL.createObjectURL(blob);\n    \n    setImageFiles(prevFiles => [...prevFiles, file]);\n    setImagePreviews(prevPreviews => [...prevPreviews, {\n      url: previewUrl,\n      name: file.name,\n      type: file.type.startsWith('video/') ? 'video' : 'image'\n    }]);\n    \n    // Insert markdown reference with filename\n    // The actual URL will be resolved when viewing the product\n    // based on matching the filename to uploaded images\n    setFormData((prev) => {\n      const desc = prev.description || \"\";\n      const md = `![${file.name}](${file.name})`;\n      return { ...prev, description: desc + (desc && !desc.endsWith('\\n') ? '\\n' : '') + md + '\\n' };\n    });\n  };\n\n  // Custom image command for MDEditor\n  const customImageCommand = {\n    ...commands.image,\n    execute: (state, api) => {\n      if (mdImageInputRef.current) {\n        mdImageInputRef.current.value = '';\n        mdImageInputRef.current.click();\n      }\n    },\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-10 w-full max-w-4xl mx-auto font-sans\">\n      \n      {/* ========== HEADER SECTION (MODE-SPECIFIC) ========== */}\n      \n      {/* ADD MODE: Simple title */}\n      {mode === 'add' && (\n        <div className=\"mb-4\">\n          <h1 className=\"text-xl font-bold text-gray-800\">Add New Product</h1>\n          <p className=\"text-gray-600 text-xs mt-1\">Create a new product for your catalog</p>\n        </div>\n      )}\n      {/* End of description section */}\n        \n      {/* EDIT MODE: Title with close button */}\n      {mode === 'edit' && (\n        \n        <div className=\"flex justify-between items-start mb-6\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-800\">Edit Product</h1>\n            <p className=\"text-gray-600 text-sm mt-1\">Update your product catalog</p>\n          </div>\n          {/* Close button - calls onCancel callback */}\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"text-gray-500 hover:text-gray-700 text-xl cursor-pointer\"\n          >\n            ‚úï\n          </button>\n        </div>\n      )}\n        \n      <form onSubmit={handleSubmit}>\n        \n        {/* Name - full width */}\n        <div className=\"mb-4\">\n          <label className=\"block text-xs font-medium text-black mb-1\">\n            Name <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={formData.name}\n            onChange={handleInputChange}\n            className={`w-full px-3 py-1.5 text-sm border ${errors.name ? 'border-red-500 focus:ring-red-500' : 'border-gray-300 focus:ring-green-500'} rounded-md focus:ring-2 focus:border-transparent`}\n            placeholder=\"Enter product name\"\n            autoComplete=\"off\"\n          />\n          {errors.name && <div className=\"text-xs text-red-500 mt-1\">{errors.name}</div>}\n        </div>\n\n        {/* Product Variants Section */}\n        <div className=\"mb-6\">\n          <ProductVariant\n            initialVariants={variants}\n            onVariantsChange={setVariants}\n            mode={mode}\n          />\n        </div>\n\n        {/* Description - full width with Markdown editor, toolbar, preview, and expand */}\n        <div className=\"mb-4 w-full\">\n          <label className=\"block text-xs font-medium text-black mb-1\">\n            Description <span className=\"text-red-500\">*</span>\n          </label>\n          <div className=\"w-full relative\">\n            {/* Preview mode button at top right */}\n            <button\n              type=\"button\"\n              className=\"absolute right-2 md-preview-mode-btn z-10 text-xs px-4 py-1 rounded border border-gray-700 bg-[#181a1b] text-white hover:bg-gray-900 shadow\"\n              onClick={() => setFormData((prev) => ({ ...prev, previewMode: !prev.previewMode }))}\n              style={{ minWidth: 110 }}\n            >\n              {formData.previewMode ? 'Edit mode' : 'Preview mode'}\n            </button>\n            <div data-color-mode=\"dark\">\n              <MDEditor\n                value={formData.description || \"\"}\n                onChange={(val) => {\n                  const newVal = val || \"\";\n                  if (newVal.length <= DESCRIPTION_LIMIT) {\n                    setFormData((prev) => ({ ...prev, description: newVal }));\n                  }\n                }}\n                height={300}\n                preview={formData.previewMode ? \"preview\" : \"edit\"}\n                commands={[\n                  commands.group([\n                    commands.title1,\n                    commands.title2,\n                    commands.title3,\n                    commands.title4,\n                    commands.title5,\n                    commands.title6,\n                  ], {\n                    name: 'title',\n                    groupName: 'title',\n                    buttonProps: {\n                      'aria-label': 'Headings',\n                      title: 'Headings',\n                      children: 'Headings',\n                    },\n                  }),\n                  commands.bold,\n                  commands.italic,\n                  commands.underline,\n                  commands.strikethrough,\n                  commands.unorderedListCommand,\n                  commands.orderedListCommand,\n                  commands.link,\n                ]}\n                extraCommands={[]}\n                textareaProps={{\n                  placeholder: \"Enter description (supports Markdown and images)\",\n                  maxLength: DESCRIPTION_LIMIT,\n                  name: \"description\",\n                  style: { minHeight: 120, resize: 'vertical', background: '#fff', color: '#222' }\n                }}\n                style={{ width: '100%', borderRadius: 8, boxShadow: 'none', background: '#fff', color: '#222', border: '1px solid #000' }}\n                visibleDragbar={false}\n              />\n            </div>\n            {/* Hidden file input for markdown image upload */}\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              ref={mdImageInputRef}\n              style={{ display: 'none' }}\n              onChange={e => {\n                const file = e.target.files && e.target.files[0];\n                if (file) insertImageMarkdown(file);\n              }}\n            />\n            </div>\n            {/* Expand icon at bottom right */}\n            <button\n              type=\"button\"\n              className=\"absolute right-2 bottom-2 z-10 text-xs px-2 py-1 rounded border border-gray-300 bg-white text-gray-800 hover:bg-gray-100 shadow flex items-center\"\n              title=\"Expand\"\n              onClick={() => {\n                const el = document.querySelector('.w-md-editor');\n                if (el) el.classList.toggle('w-md-editor-fullscreen');\n              }}\n            >\n              <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path d=\"M4 8V4h4M20 8V4h-4M4 16v4h4M20 16v4h-4\"/></svg>\n              <span className=\"ml-1\">Expand</span>\n            </button>\n          <div className=\"flex justify-between items-center mt-1\">\n            {errors.description && <div className=\"text-xs text-red-500\">{errors.description}</div>}\n            <div className=\"text-right text-xs text-gray-500 ml-auto\">\n              {formData.description.length} / {DESCRIPTION_LIMIT} characters\n            </div>\n          </div>\n        </div>\n\n        {/* Two-column grid for about_item/product_details and safety_info/usage_direction */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* About This Item */}\n          <div>\n            <label className=\"block text-xs font-medium text-black mb-1\">\n              About Item <span className=\"text-red-500\">*</span>\n            </label>\n            <textarea\n              name=\"about_item\"\n              value={formData.about_item}\n              onChange={handleInputChange}\n              className={`w-full px-3 py-1.5 text-sm border ${errors.about_item ? 'border-red-500 focus:ring-red-500' : 'border-gray-300 focus:ring-green-500'} rounded-md focus:ring-2 focus:border-transparent resize-none`}\n              placeholder=\"Enter about item details\"\n              rows=\"3\"\n            />\n            {errors.about_item && <div className=\"text-xs text-red-500 mt-1\">{errors.about_item}</div>}\n          </div>\n          {/* Product Details */}\n          <div>\n            <label className=\"block text-xs font-medium text-black mb-1\">\n              Product Details <span className=\"text-red-500\">*</span>\n            </label>\n            <textarea\n              name=\"product_details\"\n              value={formData.product_details}\n              onChange={handleInputChange}\n              className={`w-full px-3 py-1.5 text-sm border ${errors.product_details ? 'border-red-500 focus:ring-red-500' : 'border-gray-300 focus:ring-green-500'} rounded-md focus:ring-2 focus:border-transparent resize-none`}\n              placeholder=\"Enter product details\"\n              rows=\"3\"\n            />\n            {errors.product_details && <div className=\"text-xs text-red-500 mt-1\">{errors.product_details}</div>}\n          </div>\n          {/* Safety Information */}\n          <div>\n            <label className=\"block text-xs font-medium text-black mb-1\">\n              Safety Information <span className=\"text-red-500\">*</span>\n            </label>\n            <textarea\n              name=\"safety_information\"\n              value={formData.safety_information}\n              onChange={handleInputChange}\n              className={`w-full px-3 py-1.5 text-sm border ${errors.safety_information ? 'border-red-500 focus:ring-red-500' : 'border-gray-300 focus:ring-green-500'} rounded-md focus:ring-2 focus:border-transparent resize-none`}\n              placeholder=\"Enter safety information\"\n              rows=\"3\"\n            />\n            {errors.safety_information && <div className=\"text-xs text-red-500 mt-1\">{errors.safety_information}</div>}\n          </div>\n          {/* Usage Directions */}\n          <div>\n            <label className=\"block text-xs font-medium text-black mb-1\">\n              Usage Directions <span className=\"text-red-500\">*</span>\n            </label>\n            <textarea\n              name=\"usage_directions\"\n              value={formData.usage_directions}\n              onChange={handleInputChange}\n              className={`w-full px-3 py-1.5 text-sm border ${errors.usage_directions ? 'border-red-500 focus:ring-red-500' : 'border-gray-300 focus:ring-green-500'} rounded-md focus:ring-2 focus:border-transparent resize-none`}\n              placeholder=\"Enter usage directions\"\n              rows=\"3\"\n            />\n            {errors.usage_directions && <div className=\"text-xs text-red-500 mt-1\">{errors.usage_directions}</div>}\n          </div>\n        </div>\n\n        {/* ========== IMAGE UPLOAD SECTION ========== */}\n        <div className=\"mb-4\">\n          <label className=\"block text-xs font-medium text-black mb-1\">\n            Images <span className=\"text-red-500\">*</span> { displayImages.length === 0 \n      ? \"\" \n      : `[${currentImageIndex + 1}/${displayImages.length}]` \n  }\n          </label>\n          \n          {errors.images && (\n            <div className=\"text-xs text-red-500 mb-1\">{errors.images}</div>\n          )}\n          {imageTypeError && (\n            <div className=\"text-xs text-red-500 mb-1\">{imageTypeError}</div>\n          )}\n          {imageSizeError && (\n            <div className=\"flex items-center gap-2 bg-red-50 border border-red-200 rounded-md p-3 mb-3\">\n              <Image \n                src=\"/AG - error.png\" \n                alt=\"Error\" \n                width={40} \n                height={40}\n                className=\"flex-shrink-0\"\n                unoptimized\n              />\n              <span className=\"text-sm text-red-600\">{imageSizeError}</span>\n            </div>\n          )}\n          {displayImages.length > 0 ? (\n            <div className=\"relative bg-gray-100 rounded-lg p-3 mb-3 h-[160px]\">\n              \n              {/* Previous Button */}\n              {displayImages.length > 1 && (\n                <button\n                  type=\"button\"\n                  onClick={prevImage}\n                  className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-50 z-10 flex items-center justify-center\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                  </svg>\n                </button>\n              )}\n\n              {/* Image/Video Display */}\n              <div className=\"h-24 flex items-center justify-center relative\">\n                {displayImages[currentImageIndex] && (\n                  <>\n                    {displayImages[currentImageIndex]?.type === 'video' ? (\n                      <video\n                        src={\n                          displayImages[currentImageIndex]?.isNew || !displayImages[currentImageIndex]?.url?.startsWith('/')\n                            ? displayImages[currentImageIndex]?.url\n                            : `${STRAPI_URL}${displayImages[currentImageIndex].url}`\n                        }\n                        className=\"max-h-24 max-w-full object-contain\"\n                        controls\n                      />\n                    ) : (\n                      <Image\n                        src={\n                          displayImages[currentImageIndex]?.isNew || !displayImages[currentImageIndex]?.url?.startsWith('/')\n                            ? displayImages[currentImageIndex]?.url\n                            : `${STRAPI_URL}${displayImages[currentImageIndex].url}`\n                        }\n                        alt=\"Product preview\"\n                        width={300}\n                        height={96}\n                        className=\"max-h-24 max-w-full object-contain\"\n                        unoptimized\n                      />\n                    )}\n                  </>\n                )}\n              </div>\n\n              {/* Action Controls - Bottom Center */}\n              {displayImages[currentImageIndex] && (\n              <div className=\"absolute bottom-3 left-0 right-0 flex items-center justify-center gap-2 px-3\">\n                \n                {/* Image Name Display */}\n                <div className=\"bg-white px-2 py-0.5 rounded-md shadow-sm max-w-xs truncate\">\n                  <span className=\"text-xs text-gray-700\">\n                    {displayImages[currentImageIndex]?.name || `Image ${currentImageIndex + 1}`}\n                  </span>\n                </div>\n\n                <div className=\"flex items-center gap-0.5 bg-white rounded-md shadow-sm p-0.5\">\n                  \n                  {/* Delete Icon */}\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveImage(currentImageIndex)}\n                    className=\"hover:bg-gray-100 p-1 rounded cursor-pointer\"\n                    title=\"Delete image\"\n                  >\n                    <svg className=\"w-3.5 h-3.5 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                  </button>\n\n                  {/* Replace Icon */}\n                  <label className=\"cursor-pointer hover:bg-gray-100 p-1 rounded\" title=\"Replace current media\">\n                    <svg className=\"w-3.5 h-3.5 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                    </svg>\n                    <input\n                      type=\"file\"\n                      accept=\"image/png,image/jpeg,image/jpg,video/mp4,video/webm,video/ogg\"\n                      onChange={(e) => {\n                        setImageTypeError(\"\");\n                        setImageSizeError(\"\");\n                        const file = e.target.files?.[0];\n                        const allowedImageTypes = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n                        const allowedVideoTypes = [\"video/mp4\", \"video/webm\", \"video/ogg\"];\n                        const allowedTypes = [...allowedImageTypes, ...allowedVideoTypes];\n                        if (file && !allowedTypes.includes(file.type)) {\n                          setImageTypeError(\"Only PNG, JPEG images and MP4, WebM, OGG videos are allowed.\");\n                          e.target.value = '';\n                          return;\n                        }\n                        // Check video file size (4MB limit)\n                        if (file && file.type.startsWith('video/') && file.size > VIDEO_SIZE_LIMIT) {\n                          setImageSizeError(`Video file \"${file.name}\" exceeds 4MB size limit`);\n                          e.target.value = '';\n                          return;\n                        }\n                        if (file) {\n                          if (mode === 'edit') {\n                            const displayImages = getDisplayImages();\n                            const currentItem = displayImages[currentImageIndex];\n                            \n                            // If replacing an existing image\n                            if (!currentItem?.isNew) {\n                              const existingIndex = existingImages.findIndex(img => \n                                img.url === currentItem.url || img.id === currentItem.id\n                              );\n                              if (existingIndex !== -1 && !selectedSlots.includes(existingIndex)) {\n                                setSelectedSlots(prev => [...prev, existingIndex]);\n                              }\n                            }\n                            \n                            setImageFiles(prev => [...prev, file]);\n                            setImagePreviews(prev => [...prev, {\n                              url: URL.createObjectURL(file),\n                              name: file.name,\n                              type: file.type.startsWith('video/') ? 'video' : 'image'\n                            }]);\n                          } else {\n                            const newFiles = [...imageFiles];\n                            newFiles[currentImageIndex] = file;\n                            setImageFiles(newFiles);\n                            const newPreviews = [...imagePreviews];\n                            newPreviews[currentImageIndex] = {\n                              url: URL.createObjectURL(file),\n                              name: file.name,\n                              type: file.type.startsWith('video/') ? 'video' : 'image'\n                            };\n                            setImagePreviews(newPreviews);\n                          }\n                        }\n                        e.target.value = '';\n                      }}\n                      className=\"hidden\"\n                    />\n                  </label>\n\n                  {/* Add More Images/Videos Icon */}\n                  <label className=\"cursor-pointer hover:bg-gray-100 p-1 rounded\" title=\"Add more images or videos\">\n                    <svg className=\"w-3.5 h-3.5 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                    </svg>\n                    <input\n                      type=\"file\"\n                      accept=\"image/png,image/jpeg,image/jpg,video/mp4,video/webm,video/ogg\"\n                      multiple\n                      onChange={(e) => {\n                        setImageTypeError(\"\");\n                        setImageSizeError(\"\");\n                        const newFiles = Array.from(e.target.files || []);\n                        const allowedImageTypes = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n                        const allowedVideoTypes = [\"video/mp4\", \"video/webm\", \"video/ogg\"];\n                        const allowedTypes = [...allowedImageTypes, ...allowedVideoTypes];\n                        const invalid = newFiles.find(f => !allowedTypes.includes(f.type));\n                        if (invalid) {\n                          setImageTypeError(\"Only PNG, JPEG images and MP4, WebM, OGG videos are allowed.\");\n                          e.target.value = '';\n                          return;\n                        }\n                        // Check video file size (4MB limit)\n                        const oversizedVideo = newFiles.find(f => {\n                          if (f.type.startsWith('video/') && f.size > VIDEO_SIZE_LIMIT) {\n                            return true;\n                          }\n                          return false;\n                        });\n                        if (oversizedVideo) {\n                          setImageSizeError(`Video file \"${oversizedVideo.name}\" exceeds 4MB size limit`);\n                          e.target.value = '';\n                          return;\n                        }\n                        const updatedFiles = [...imageFiles, ...newFiles];\n                        setImageFiles(updatedFiles);\n                        const newPreviews = newFiles.map(file => ({\n                          url: URL.createObjectURL(file),\n                          name: file.name,\n                          type: file.type.startsWith('video/') ? 'video' : 'image'\n                        }));\n                        setImagePreviews([...imagePreviews, ...newPreviews]);\n                      }}\n                      className=\"hidden\"\n                    />\n                  </label>\n                </div>\n              </div>\n              )}\n\n              {/* Next Button */}\n              {displayImages.length > 1 && (\n                <button\n                  type=\"button\"\n                  onClick={nextImage}\n                  className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-50 z-10 flex items-center justify-center\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                  </svg>\n                </button>\n              )}\n            </div>\n            \n          ) : (\n            \n            <label className=\"cursor-pointer block mb-3\">\n              <div className=\"relative bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-100 hover:border-green-400 transition-all h-[160px]\">\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center text-center p-4\">\n                  <div className=\"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center mb-2\">\n                    <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                    </svg>\n                  </div>\n                  <p className=\"text-gray-600 text-xs\">\n                    Click to add Images or Videos\n                  </p>\n                  <p className=\"text-gray-500 text-xs mt-1\">\n                    PNG, JPEG, MP4\n                  </p>\n                </div>\n              </div>\n              <input\n                type=\"file\"\n                accept=\"image/png,image/jpeg,image/jpg,video/mp4,video/webm,video/ogg\"\n                multiple\n                onChange={handleImageSelect}\n                className=\"hidden\"\n              />\n            </label>\n          )}\n        </div>\n\n        {/* ========== FORM ACTION BUTTONS ========== */}\n        <div className=\"flex justify-end gap-2 pt-2\">\n          {/* Cancel Button - calls onCancel callback */}\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"px-5 py-1.5 text-sm bg-green-600 hover:bg-green-700 rounded-md transition-colors text-white !text-white cursor-pointer\"\n            style={{color: '#fff'}}\n            disabled={isLoading}\n          >\n            Cancel\n          </button>\n          \n          {/* Save/Submit Button - triggers handleSubmit */}\n  {/* SAVE as Draft */}\n\n  <button\n    type=\"submit\"\n    onClick={() => setSubmitAction(\"draft\")}\n    className=\"bg-green-600 text-white px-4 py-2 hover:bg-green-700 rounded flex items-center justify-center cursor-pointer\"\n    disabled={isLoading}\n  >\n    Save\n  </button>\n\n  {/* Publish */}\n\n  <button\n    type=\"submit\"\n    onClick={() => setSubmitAction(\"published\")}\n    className=\"bg-green-600 text-white px-4 py-2 hover:bg-green-700 rounded flex items-center justify-center cursor-pointer\"\n    disabled={isLoading}\n  >\n    Publish\n  </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2970, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/shared/Sidebar.js"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\n\n/**\n * Sidebar Component\n * \n * Reusable sidebar navigation component with user profile display and collapse functionality\n * \n * @param {Object} props\n * @param {Object} props.profile - User profile data\n * @param {Function} props.onLogout - Logout handler function\n * @param {Function} props.onCollapseChange - Callback when sidebar collapse state changes\n */\nexport default function Sidebar({ profile, onLogout, onCollapseChange }) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const [isCollapsed, setIsCollapsed] = useState(() => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(\"sidebarCollapsed\");\n      return saved !== null ? JSON.parse(saved) : false;\n    }\n    return false;\n  });\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Load sidebar state from localStorage on mount\n  useEffect(() => {\n    if (onCollapseChange) {\n      onCollapseChange(isCollapsed);\n    }\n    setIsMounted(true);\n  }, [isCollapsed, onCollapseChange]);\n\n  const menuItems = [\n    { name: \"Dashboard\", path: \"/dashboard\", icon: \"üìä\", disabled: true },\n    { name: \"Products\", path: \"/products\", icon: \"üì¶\", disabled: false },\n    { name: \"Campaigns\", path: \"/campaigns\", icon: \"üì¢\", disabled: true },\n    { name: \"Analytics\", path: \"/analytics\", icon: \"üìà\", disabled: true },\n  ];\n\n  const isActive = (path) => pathname === path;\n\n  const toggleSidebar = () => {\n    const newState = !isCollapsed;\n    setIsCollapsed(newState);\n    localStorage.setItem(\"sidebarCollapsed\", JSON.stringify(newState));\n    if (onCollapseChange) {\n      onCollapseChange(newState);\n    }\n  };\n\n  const handleMenuClick = (item) => {\n    if (item.disabled) return;\n    router.push(item.path);\n  };\n\n  const handleLogout = () => {\n    // Clear sidebar state from localStorage on logout\n    localStorage.removeItem(\"sidebarCollapsed\");\n    // Call the parent logout handler\n    if (onLogout) {\n      onLogout();\n    }\n  };\n\n  return (\n    <div className={`fixed left-0 top-0 h-full bg-white shadow-lg flex flex-col transition-all duration-300 ${isCollapsed ? 'w-20' : 'w-64'}`}>\n      {/* Logo Section with Toggle Button */}\n      <div className=\"p-6 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          {!isCollapsed ? (\n            <>\n              <div className=\"flex items-center gap-3\">\n                <span>\n                  <img src=\"/vercel.svg\" alt=\"Logo\" style={{ width: '24px', height: '24px' }} />\n                </span>\n                <span className=\"font-bold text-xl text-gray-800\">\n                  Rural Pulse\n                </span>\n              </div>\n              <button\n                onClick={toggleSidebar}\n                className=\"bg-gray-100 text-gray-700 rounded-md p-1.5 hover:bg-gray-200 transition-colors flex-shrink-0\"\n              >\n                <svg \n                  className=\"w-5 h-5\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 19l-7-7 7-7m8 14l-7-7 7-7\" />\n                </svg>\n              </button>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center w-full gap-5\">\n              <span>\n                <img src=\"/vercel.svg \" alt=\"Rural Pulse Logo\" style={{ width: '24px', height: '30px' }} />\n              </span>\n              <button\n                onClick={toggleSidebar}\n                className=\"bg-gray-100 text-gray-700 rounded-md p-1.5 hover:bg-gray-200 transition-colors\"\n              >\n                <svg \n                  className=\"w-4 h-4\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Navigation Menu */}\n      <nav className=\"flex-1 py-6\">\n        {menuItems.map((item) => (\n          <button\n            key={item.path}\n            onClick={() => handleMenuClick(item)}\n            className={`w-full flex items-center gap-3 px-6 py-3 text-left transition-colors ${\n              item.disabled\n                ? \"text-gray-400 cursor-not-allowed opacity-50\"\n                : isActive(item.path)\n                ? \"bg-green-50 text-green-700 border-r-4 border-green-700 font-semibold\"\n                : \"text-gray-700 hover:bg-gray-50\"\n            }`}\n            title={isCollapsed ? item.name : ''}\n            disabled={item.disabled}\n          >\n            <span className=\"text-xl\">{item.icon}</span>\n            {!isCollapsed && <span>{item.name}</span>}\n          </button>\n        ))}\n      </nav>\n\n      {/* User Profile Section */}\n      <div className={`border-t border-gray-200 ${isCollapsed ? 'p-3' : 'p-6'}`}>\n        {!isCollapsed ? (\n          <>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                <span className=\"text-green-700 font-bold text-lg\">\n                  {profile?.username?.charAt(0).toUpperCase() || \"U\"}\n                </span>\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"font-semibold text-gray-800 text-sm\">\n                  {profile?.username || \"User\"}\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  {profile?.email || \"\"}\n                </p>\n              </div>\n            </div>\n\n            <button\n              onClick={handleLogout}\n              className=\"w-full bg-green-50 text-green-600 hover:bg-green-100 font-semibold px-4 py-2 rounded-md text-sm transition-colors flex items-center gap-2 cursor-pointer\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n              <span>Logout</span>\n            </button>\n          </>\n        ) : (\n          <div className=\"flex flex-col items-center gap-3\">\n            <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n              <span className=\"text-green-700 font-bold text-lg\">\n                {profile?.username?.charAt(0).toUpperCase() || \"U\"}\n              </span>\n            </div>\n\n            <button\n              onClick={handleLogout}\n              className=\"w-10 h-10 bg-green-50 text-green-600 hover:bg-green-100 font-semibold rounded-md transition-colors flex items-center justify-center flex-shrink-0 cursor-pointer\"\n              title=\"Logout\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3379, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/shared/Loader.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport Image from \"next/image\";\r\nimport \"./loader.css\";\r\n\r\nexport default function Loader({ isVisible = false, message = \"Saving...\" }) {\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-2xl p-8 flex flex-col items-center gap-4 max-w-md\">\r\n        {/* Animated Loader Image */}\r\n        <div className=\"w-24 h-24 dance-animation\">\r\n          <Image\r\n            src=\"/AG - Macsot.png\"\r\n            alt=\"Loading...\"\r\n            width={96}\r\n            height={96}\r\n            className=\"w-full h-full object-contain\"\r\n            unoptimized\r\n          />\r\n        </div>\r\n\r\n        {/* Loading Text */}\r\n        <div className=\"text-center\">\r\n          <p className=\"text-lg font-semibold text-gray-800\">{message}</p>\r\n          <p className=\"text-xs text-gray-500 mt-1\">Please wait!!!\r\n            Good things take time‚Ä¶ almost there!<span className=\"loading-dots\"><span>.</span><span>.</span><span>.</span></span></p>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;;AAMe,SAAS,OAAO,EAAE,YAAY,KAAK,EAAE,UAAU,WAAW,EAAE;IACzE,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,wIAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,WAAU;wBACV,WAAW;;;;;;;;;;;8BAKf,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAAuC;;;;;;sCACpD,8OAAC;4BAAE,WAAU;;gCAA6B;8CACJ,8OAAC;oCAAK,WAAU;;sDAAe,8OAAC;sDAAK;;;;;;sDAAQ,8OAAC;sDAAK;;;;;;sDAAQ,8OAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMjH","debugId":null}},
    {"offset": {"line": 3490, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Swetha/Downloads/new_updated%203-12-2025/Frontend_updated/components/add-product/AddProduct.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport ProductForm from \"@/components/shared/ProductForm\";\r\nimport Sidebar from \"@/components/shared/Sidebar\";\r\nimport Loader from \"@/components/shared/Loader\";\r\nimport { uploadFiles, createProductAPI, fetchProductsAPI, formatProductData, createVariantAPI } from \"@/utils/productApi\";\r\nimport { showToast } from \"@/components/shared/toast\";\r\n\r\nexport default function AddProductPage() {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(false);\r\n  const [profile, setProfile] = useState(null);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(() => {\r\n    if (typeof window !== \"undefined\") {\r\n      const saved = localStorage.getItem(\"sidebarCollapsed\");\r\n      return saved !== null ? JSON.parse(saved) : false;\r\n    }\r\n    return false;\r\n  });\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem(\"user\");\r\n    if (userData) {\r\n      try {\r\n        const parsedUser = JSON.parse(userData);\r\n        setProfile(parsedUser);\r\n      } catch (err) {\r\n        // ignore\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleSubmit = async ({ action, formData, imageFiles, variants }) => {\r\n    setLoading(true);\r\n    try {\r\n      let uploadedImages = [];\r\n      if (imageFiles.length > 0) {\r\n        uploadedImages = await uploadFiles(imageFiles);\r\n      }\r\n      const imageIds = uploadedImages.map((img) => img.id);\r\n      \r\n      // Save unsaved variants first (those with tempId but no documentId)\r\n      let variantIds = [];\r\n      const unsavedVariants = variants.filter((v) => v.tempId && !v.documentId);\r\n      \r\n      console.log(\"üì¶ All variants:\", variants);\r\n      console.log(\"‚è≥ Unsaved variants to create:\", unsavedVariants);\r\n      \r\n      if (unsavedVariants.length > 0) {\r\n        console.log(\"üíæ Creating unsaved variants...\");\r\n        for (const variant of unsavedVariants) {\r\n          try {\r\n            const response = await createVariantAPI(variant); // Always publishes\r\n            const variantData = response.data || response;\r\n            console.log(\"‚úÖ Variant created:\", variantData);\r\n            variantIds.push(variantData.documentId || variantData.id);\r\n          } catch (err) {\r\n            console.error(\"‚ùå Error creating variant:\", err);\r\n            showToast(`Failed to create variant: ${err.message}`, \"error\");\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Add already-saved variants\r\n      const savedVariants = variants.filter((v) => v.documentId || (v.id && !v.tempId));\r\n      variantIds.push(...savedVariants.map((v) => v.documentId || v.id));\r\n      \r\n      console.log(\"üîó Final variant IDs for product:\", variantIds);\r\n      \r\n      const payload = {\r\n        name: formData.name.trim(),\r\n        description: formData.description.trim(),\r\n        about_item: formData.about_item,\r\n        product_details: formData.product_details,\r\n        safety_information: formData.safety_information,\r\n        usage_directions: formData.usage_directions,\r\n        images: imageIds,\r\n        product_variants: variantIds, // Include variant IDs\r\n        status: action\r\n      };\r\n      console.log(\"üì§ Payload for new product:\", payload);\r\n      const data = await createProductAPI(payload);\r\n      if (!data.success) throw new Error(data?.error || \"Failed to create product\");\r\n      \r\n      const message = action === \"published\" ? \"Product published successfully!\" : \"Product saved as draft!\";\r\n      showToast(message, \"success\");\r\n      \r\n      // Redirect to products page\r\n      router.push(\"/products\");\r\n    } catch (err) {\r\n      showToast(err.message || \"Failed to create product\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    router.push(\"/products\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n      {/* LOADER */}\r\n      <Loader \r\n        isVisible={loading} \r\n        message=\"Creating product...\"\r\n      />\r\n      \r\n      {/* SIDEBAR */}\r\n      <Sidebar \r\n        profile={profile} \r\n        onLogout={() => { localStorage.removeItem(\"token\"); router.push(\"/signin\"); }}\r\n        onCollapseChange={setSidebarCollapsed}\r\n      />\r\n      {/* MAIN CONTENT */}\r\n      <div \r\n        className=\"flex-1 transition-all duration-300\" \r\n        style={{ marginLeft: sidebarCollapsed ? '80px' : '256px' }}\r\n      >\r\n        <div className=\"max-w-8xl mx-5 px-6 py-8\">\r\n          {/* FORM */}\r\n          <div className=\"flex justify-center items-start\">\r\n            <div className=\"w-full max-w-full mx-auto\">\r\n              <ProductForm\r\n                mode=\"add\"\r\n                onSubmit={handleSubmit}\r\n                onCancel={handleCancel}\r\n                isLoading={loading}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}