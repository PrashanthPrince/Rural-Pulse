{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/B-Sec/Projects/Rural%20Pulse/Frontend/components/shared/Sidebar.js"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\n\n/**\n * Sidebar Component\n * \n * Reusable sidebar navigation component with user profile display and collapse functionality\n * \n * @param {Object} props\n * @param {Object} props.profile - User profile data\n * @param {Function} props.onLogout - Logout handler function\n * @param {Function} props.onCollapseChange - Callback when sidebar collapse state changes\n */\nexport default function Sidebar({ profile, onLogout, onCollapseChange }) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const [isCollapsed, setIsCollapsed] = useState(() => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(\"sidebarCollapsed\");\n      return saved !== null ? JSON.parse(saved) : false;\n    }\n    return false;\n  });\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Load sidebar state from localStorage on mount\n  useEffect(() => {\n    if (onCollapseChange) {\n      onCollapseChange(isCollapsed);\n    }\n    setIsMounted(true);\n  }, [isCollapsed, onCollapseChange]);\n\n  const menuItems = [\n    { name: \"Dashboard\", path: \"/dashboard\", icon: \"ðŸ“Š\", disabled: true },\n    { name: \"Products\", path: \"/products\", icon: \"ðŸ“¦\", disabled: false },\n    { name: \"Campaigns\", path: \"/campaigns\", icon: \"ðŸ“¢\", disabled: true },\n    { name: \"Analytics\", path: \"/analytics\", icon: \"ðŸ“ˆ\", disabled: true },\n  ];\n\n  const isActive = (path) => pathname === path;\n\n  const toggleSidebar = () => {\n    const newState = !isCollapsed;\n    setIsCollapsed(newState);\n    localStorage.setItem(\"sidebarCollapsed\", JSON.stringify(newState));\n    if (onCollapseChange) {\n      onCollapseChange(newState);\n    }\n  };\n\n  const handleMenuClick = (item) => {\n    if (item.disabled) return;\n    router.push(item.path);\n  };\n\n  const handleLogout = () => {\n    // Clear sidebar state from localStorage on logout\n    localStorage.removeItem(\"sidebarCollapsed\");\n    localStorage.removeItem(\"productVariantEnums\");\n    // Call the parent logout handler\n    if (onLogout) {\n      onLogout();\n    }\n  };\n\n  return (\n    <div className={`fixed left-0 top-0 h-full bg-white shadow-lg flex flex-col transition-all duration-300 ${isCollapsed ? 'w-20' : 'w-64'}`}>\n      {/* Logo Section with Toggle Button */}\n      <div className=\"p-6 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          {!isCollapsed ? (\n            <>\n              <div className=\"flex items-center gap-3\">\n                <span>\n                  <img src=\"/vercel.svg\" alt=\"Logo\" style={{ width: '24px', height: '24px' }} />\n                </span>\n                <span className=\"font-bold text-xl text-gray-800\">\n                  Rural Pulse\n                </span>\n              </div>\n              <button\n                onClick={toggleSidebar}\n                className=\"bg-gray-100 text-gray-700 rounded-md p-1.5 hover:bg-gray-200 transition-colors flex-shrink-0\"\n              >\n                <svg \n                  className=\"w-5 h-5\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 19l-7-7 7-7m8 14l-7-7 7-7\" />\n                </svg>\n              </button>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center w-full gap-5\">\n              <span>\n                <img src=\"/vercel.svg\" alt=\"Rural Pulse Logo\" style={{ width: '24px', height: '30px' }} />\n              </span>\n              <button\n                onClick={toggleSidebar}\n                className=\"bg-gray-100 text-gray-700 rounded-md p-1.5 hover:bg-gray-200 transition-colors\"\n              >\n                <svg \n                  className=\"w-4 h-4\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Navigation Menu */}\n      <nav className=\"flex-1 py-6\">\n        {menuItems.map((item) => (\n          <button\n            key={item.path}\n            onClick={() => handleMenuClick(item)}\n            className={`w-full flex items-center gap-3 px-6 py-3 text-left transition-colors ${\n              item.disabled\n                ? \"text-gray-400 cursor-not-allowed opacity-50\"\n                : isActive(item.path)\n                ? \"bg-green-50 text-green-700 border-r-4 border-green-700 font-semibold\"\n                : \"text-gray-700 hover:bg-gray-50\"\n            }`}\n            title={isCollapsed ? item.name : ''}\n            disabled={item.disabled}\n          >\n            <span className=\"text-xl\">{item.icon}</span>\n            {!isCollapsed && <span>{item.name}</span>}\n          </button>\n        ))}\n      </nav>\n\n      {/* User Profile Section */}\n      <div className={`border-t border-gray-200 ${isCollapsed ? 'p-3' : 'p-6'}`}>\n        {!isCollapsed ? (\n          <>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                <span className=\"text-green-700 font-bold text-lg\">\n                  {profile?.username?.charAt(0).toUpperCase() || \"U\"}\n                </span>\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"font-semibold text-gray-800 text-sm\">\n                  {profile?.username || \"User\"}\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  {profile?.email || \"\"}\n                </p>\n              </div>\n            </div>\n\n            <button\n              onClick={handleLogout}\n              className=\"w-full bg-green-50 text-green-600 hover:bg-green-100 font-semibold px-4 py-2 rounded-md text-sm transition-colors flex items-center gap-2 cursor-pointer\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n              <span>Logout</span>\n            </button>\n          </>\n        ) : (\n          <div className=\"flex flex-col items-center gap-3\">\n            <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n              <span className=\"text-green-700 font-bold text-lg\">\n                {profile?.username?.charAt(0).toUpperCase() || \"U\"}\n              </span>\n            </div>\n\n            <button\n              onClick={handleLogout}\n              className=\"w-10 h-10 bg-green-50 text-green-600 hover:bg-green-100 font-semibold rounded-md transition-colors flex items-center justify-center flex-shrink-0 cursor-pointer\"\n              title=\"Logout\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///D:/B-Sec/Projects/Rural%20Pulse/Frontend/components/shared/toast.js"],"sourcesContent":["import React from \"react\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport Image from \"next/image\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"../../app/style/toast-custom.css\";\n\nexport function showToast(message, type = \"info\") {\n  const ToastContent = () => (\n    <div className=\"toast-wrapper\">\n      {/* Large Mascot Image Outside */}\n      <div className=\"toast-mascot\">\n        <Image\n          src={type === \"error\" ? \"/AG - error.png\" : \"/AG - success.png\"}\n          alt={type === \"error\" ? \"Error\" : \"Success\"}\n          width={120}\n          height={120}\n          className=\"object-contain\"\n          unoptimized\n        />\n      </div>\n      \n      {/* Toast Box with Message */}\n      <div className=\"toast-content\">\n        <p className=\"text-sm font-medium\">{message}</p>\n      </div>\n    </div>\n  );\n\n  toast[type](<ToastContent />, {\n    position: \"bottom-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined,\n    theme: \"light\",\n    icon: false,\n    style: { backgroundColor: \"transparent\", padding: \"0\", boxShadow: \"none\" },\n  });\n}\n\nexport function ToastRoot() {\n  return <ToastContainer position=\"bottom-right\" />;\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;;;AAIO,SAAS,UAAU,OAAO,EAAE,OAAO,MAAM;IAC9C,MAAM,eAAe,kBACnB,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,wIAAK;wBACJ,KAAK,SAAS,UAAU,oBAAoB;wBAC5C,KAAK,SAAS,UAAU,UAAU;wBAClC,OAAO;wBACP,QAAQ;wBACR,WAAU;wBACV,WAAW;;;;;;;;;;;8BAKf,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAuB;;;;;;;;;;;;;;;;;IAK1C,4JAAK,CAAC,KAAK,eAAC,8OAAC;;;;cAAiB;QAC5B,UAAU;QACV,WAAW;QACX,iBAAiB;QACjB,cAAc;QACd,cAAc;QACd,WAAW;QACX,UAAU;QACV,OAAO;QACP,MAAM;QACN,OAAO;YAAE,iBAAiB;YAAe,SAAS;YAAK,WAAW;QAAO;IAC3E;AACF;AAEO,SAAS;IACd,qBAAO,8OAAC,qKAAc;QAAC,UAAS;;;;;;AAClC","debugId":null}},
    {"offset": {"line": 526, "column": 0}, "map": {"version":3,"sources":["file:///D:/B-Sec/Projects/Rural%20Pulse/Frontend/utils/apiConfig.js"],"sourcesContent":["// utils/apiConfig.js\r\n\r\nexport const BASE_API_URL = \"http://localhost:3000\";\r\nexport const STRAPI_URL = \"http://localhost:1337\";\r\n\r\n// API Endpoints\r\nexport const ENDPOINTS = {\r\n  LOGIN: `${BASE_API_URL}/auth/login`,\r\n  RESET_PASSWORD: `${BASE_API_URL}/auth/reset-password`,\r\n  UPDATE_PASSWORD: `${BASE_API_URL}/auth/update-password`,\r\n  PRODUCTS: `${BASE_API_URL}/products`,\r\n  DELETE_PRODUCT: (id) => `${BASE_API_URL}/products/${id}`,\r\n  UPLOAD: `${STRAPI_URL}/api/upload`\r\n};\r\n"],"names":[],"mappings":"AAAA,qBAAqB;;;;;;;;;AAEd,MAAM,eAAe;AACrB,MAAM,aAAa;AAGnB,MAAM,YAAY;IACvB,OAAO,GAAG,aAAa,WAAW,CAAC;IACnC,gBAAgB,GAAG,aAAa,oBAAoB,CAAC;IACrD,iBAAiB,GAAG,aAAa,qBAAqB,CAAC;IACvD,UAAU,GAAG,aAAa,SAAS,CAAC;IACpC,gBAAgB,CAAC,KAAO,GAAG,aAAa,UAAU,EAAE,IAAI;IACxD,QAAQ,GAAG,WAAW,WAAW,CAAC;AACpC","debugId":null}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///D:/B-Sec/Projects/Rural%20Pulse/Frontend/utils/productApi.js"],"sourcesContent":["\r\n// utils/productApi.js\r\n\r\nimport { ENDPOINTS, BASE_API_URL,STRAPI_URL } from \"./apiConfig\";\r\n\r\nexport async function fetchProductsAPI() {\r\n  const res = await fetch(ENDPOINTS.PRODUCTS, {\r\n    method: \"GET\",\r\n    credentials: \"include\",\r\n  });\r\n\r\n  const data = await res.json();\r\n  return data;\r\n}\r\n\r\n/**\r\n * Fetch a single product with all relationships (images, variants, etc)\r\n * @param {string} documentId - Product documentId\r\n * @returns {Object} Product with relationships\r\n */\r\nexport async function fetchProductByIdAPI(documentId) {\r\n  try {\r\n    const res = await fetch(\r\n      `${BASE_API_URL}/products/${documentId}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n      }\r\n    );\r\n\r\n    const data = await res.json();\r\n    \r\n    if (!res.ok || !data.data) {\r\n      throw new Error(data?.error || \"Product not found\");\r\n    }\r\n\r\n    return data.data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport function formatProductData(data) {\r\n  // Handle multiple input formats\r\n  let products = [];\r\n  \r\n  if (Array.isArray(data)) {\r\n    products = data;\r\n  } else if (data.products && Array.isArray(data.products)) {\r\n    products = data.products;\r\n  } else if (data.products && typeof data.products === 'object' && !Array.isArray(data.products)) {\r\n    // If products is an object (like { data: [...] }), try to extract array\r\n    products = data.products.data || Object.values(data.products) || [];\r\n  }\r\n  \r\n  return products.map((p) => {\r\n    const images = (p.image || []).map((img) => {\r\n      // Check if it's a video by looking at the mime type or file extension\r\n      const isVideo = img.mime?.startsWith('video/') || /\\.(mp4|webm|ogg)$/i.test(img.url || '');\r\n      \r\n      if (isVideo) {\r\n        // For videos, use the full URL directly\r\n        return `${STRAPI_URL}${img.url}`;\r\n      } else {\r\n        // For images, try to use thumbnail, fallback to full URL\r\n        const imageUrl = img.formats?.thumbnail?.url || img.url;\r\n        return `${STRAPI_URL}${imageUrl}`;\r\n      }\r\n    });\r\n\r\n    // Transform FAQs from Strapi format to frontend format\r\n    // Strapi returns: { id, attributes: { Question, Answer, ... }, documentId, ... }\r\n    // Frontend expects: { id, question, answer, documentId, ... }\r\n    const faqs = (p.faqs || []).map((faq) => {\r\n      // Handle both Strapi full response and simple reference\r\n      if (faq.attributes) {\r\n        // Full FAQ object from Strapi\r\n        return {\r\n          id: faq.id,\r\n          documentId: faq.documentId,\r\n          question: faq.attributes.Question || faq.Question || '',\r\n          answer: faq.attributes.Answer || faq.Answer || '',\r\n          Question: faq.attributes.Question || faq.Question,\r\n          Answer: faq.attributes.Answer || faq.Answer,\r\n        };\r\n      } else {\r\n        // Simple FAQ reference or already transformed\r\n        return {\r\n          id: faq.id,\r\n          documentId: faq.documentId,\r\n          question: faq.Question || faq.question || '',\r\n          answer: faq.Answer || faq.answer || '',\r\n          Question: faq.Question,\r\n          Answer: faq.Answer,\r\n        };\r\n      }\r\n    });\r\n\r\n    // Preserve categories and sub_categories\r\n    return {\r\n      ...p,\r\n      images: images.length > 0 ? images : [\"/empty-bg.png\"],\r\n      categories: p.categories || [],\r\n      sub_categories: p.sub_categories || [],\r\n      faqs: faqs,\r\n    };\r\n  });\r\n}\r\n\r\n\r\nexport async function deleteProductAPI(prodId) {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const res = await fetch(ENDPOINTS.DELETE_PRODUCT(prodId), {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n\r\n  return res.json();\r\n}\r\n\r\nexport async function uploadFiles(files) {\r\n  const formData = new FormData();\r\n  files.forEach((file) => formData.append(\"files\", file));\r\n\r\n  const res = await fetch(ENDPOINTS.UPLOAD, {\r\n    method: \"POST\",\r\n    body: formData,\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const error = await res.text();\r\n    throw new Error(\"Image upload failed: \" + error);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\n// Upload files to Strapi media library directly\r\nexport async function uploadToStrapiMediaLibrary(files) {\r\n  const formData = new FormData();\r\n  files.forEach((file) => {\r\n    formData.append(\"files\", file);\r\n  });\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  console.log(\"uploadToStrapiMediaLibrary: Uploading\", files.length, \"file(s) to\", `${STRAPI_URL}/api/upload`);\r\n\r\n  const res = await fetch(`${STRAPI_URL}/api/upload`, {\r\n    method: \"POST\",\r\n    body: formData,\r\n    headers: {\r\n      // Don't set Content-Type, let the browser set it with boundary\r\n      // Authorization: `Bearer ${token}`, // Strapi upload might not need auth\r\n    },\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const error = await res.text();\r\n    console.error(\"uploadToStrapiMediaLibrary: Upload failed\", error);\r\n    throw new Error(\"Failed to upload to Strapi media library: \" + error);\r\n  }\r\n\r\n  const data = await res.json();\r\n  console.log(\"uploadToStrapiMediaLibrary: Response received\", data);\r\n  return data;\r\n}\r\n\r\nexport async function createProductAPI(payload) {\r\n  const res = await fetch(ENDPOINTS.PRODUCTS, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    credentials: \"include\",\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    throw new Error(data?.error || \"Failed to create product\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport async function updateProductAPI(documentId, formDataOrPayload) {\r\n  const token = localStorage.getItem(\"token\");\r\n  \r\n  // Check if it's FormData or JSON payload\r\n  const isFormData = formDataOrPayload instanceof FormData;\r\n  \r\n  const options = {\r\n    method: \"PUT\",\r\n    credentials: \"include\",\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n  \r\n  if (isFormData) {\r\n    // FormData with files - let browser set Content-Type with boundary\r\n    options.body = formDataOrPayload;\r\n  } else {\r\n    // JSON payload\r\n    options.headers[\"Content-Type\"] = \"application/json\";\r\n    options.body = JSON.stringify(formDataOrPayload);\r\n  }\r\n  \r\n  const res = await fetch(`${BASE_API_URL}/products/update/${documentId}`, options);\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    throw new Error(data.details || data.message || data.error || \"Product update failed\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n// ============================================================================\r\n// PRODUCT VARIANT API FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Fetch all product variants\r\n */\r\nexport async function fetchVariantsAPI() {\r\n  try {\r\n    const res = await fetch(`${BASE_API_URL}/variants`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to fetch variants\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch a single variant by ID with all relationships (draft status)\r\n */\r\nexport async function fetchVariantByIdAPI(variantId) {\r\n  try {\r\n    const res = await fetch(`${BASE_API_URL}/variants/${variantId}?status=draft`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to fetch variant\");\r\n    }\r\n\r\n    return data.data || data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Create a new product variant (always draft)\r\n * @param {Object} variantData - Variant data to create\r\n * @returns {Object} Created variant response from Strapi\r\n */\r\nexport async function createVariantAPI(variantData) {\r\n  try {\r\n    const payload = {\r\n      variant_name: variantData.variant_name,\r\n      variety_type: variantData.variety_type,\r\n      grade: variantData.grade,\r\n      weight: variantData.weight,\r\n      weight_unit: variantData.weight_unit,\r\n      size: variantData.size,\r\n      style: variantData.style,\r\n      package_type: variantData.package_type,\r\n      // CRITICAL: Include isDefault and sortOrder fields on creation\r\n      isDefault: variantData.isDefault || false,\r\n      sortOrder: typeof variantData.sortOrder === 'number' ? variantData.sortOrder : 0,\r\n    };\r\n\r\n    // Add images if provided\r\n    if (variantData.varientImage && variantData.varientImage.length > 0) {\r\n      payload.varientImage = variantData.varientImage;\r\n    }\r\n\r\n    // Note: Videos are now combined with images in varientImage field\r\n    // No separate variantVideo field is sent\r\n\r\n    const res = await fetch(`${BASE_API_URL}/variants?status=draft`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) {\r\n      throw new Error(data?.error?.message || data?.error || \"Failed to create variant\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Update an existing product variant (always draft)\r\n * @param {string} documentId - Document ID of variant to update\r\n * @param {Object} variantData - Updated variant data\r\n * @returns {Object} Updated variant response from Strapi\r\n */\r\nexport async function updateVariantAPI(documentId, variantData) {\r\n  try {\r\n    const payload = {\r\n      variant_name: variantData.variant_name,\r\n      variety_type: variantData.variety_type,\r\n      grade: variantData.grade,\r\n      weight: variantData.weight,\r\n      weight_unit: variantData.weight_unit,\r\n      size: variantData.size,\r\n      style: variantData.style,\r\n      package_type: variantData.package_type,\r\n      // CRITICAL: Include isDefault and sortOrder to persist these fields\r\n      isDefault: variantData.isDefault || false,\r\n      sortOrder: typeof variantData.sortOrder === 'number' ? variantData.sortOrder : 0,\r\n    };\r\n\r\n    // Add images if provided\r\n    if (variantData.varientImage && variantData.varientImage.length > 0) {\r\n      payload.varientImage = variantData.varientImage;\r\n    }\r\n\r\n    // Note: Videos are now combined with images in varientImage field\r\n    // No separate varientVideo field is sent\r\n\r\n    const url = `${BASE_API_URL}/variants/${documentId}?status=draft`;\r\n\r\n    console.log(\"updateVariantAPI: Sending to\", url);\r\n    console.log(\"updateVariantAPI: Payload\", payload);\r\n\r\n    const res = await fetch(url, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    console.log(\"updateVariantAPI: Response\", data);\r\n\r\n    if (!res.ok) {\r\n      throw new Error(data?.error?.message || data?.error || \"Failed to update variant\");\r\n    }\r\n\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"updateVariantAPI: Error\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Publish a draft variant (change from draft to published)\r\n * @param {string} documentId - Document ID of draft variant to publish\r\n * @returns {Object} Published variant response from Strapi\r\n */\r\nexport async function publishVariantAPI(documentId) {\r\n  try {\r\n    console.log(\"Publishing variant:\", documentId);\r\n    \r\n    const res = await fetch(`${BASE_API_URL}/variants/${documentId}?status=published`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify({}),\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) {\r\n      throw new Error(data?.error?.message || data?.error || \"Failed to publish variant\");\r\n    }\r\n\r\n    console.log(\"Variant published successfully:\", documentId);\r\n    return data.data || data;\r\n  } catch (err) {\r\n    console.error(\"Error publishing variant:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch draft variants for a product\r\n * @param {string} productDocumentId - Document ID of the product\r\n * @returns {Array} Array of draft variants\r\n */\r\nexport async function fetchDraftVariantsAPI(productDocumentId) {\r\n  try {\r\n    console.log(\"Fetching draft variants for product:\", productDocumentId);\r\n    \r\n    const res = await fetch(\r\n      `${BASE_API_URL}/products/${productDocumentId}/draft-variants?status=draft`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n      }\r\n    );\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to fetch draft variants\");\r\n    }\r\n\r\n    const variants = data.data || data;\r\n    console.log(\"Draft variants found:\", Array.isArray(variants) ? variants.length : 0);\r\n    return Array.isArray(variants) ? variants : [];\r\n  } catch (err) {\r\n    console.error(\"Error fetching draft variants:\", err);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a product variant\r\n * @param {string} documentId - Document ID of variant to delete\r\n * @returns {Object} Delete response from Strapi\r\n */\r\nexport async function deleteVariantAPI(documentId) {\r\n  const res = await fetch(`${BASE_API_URL}/variants/${documentId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    credentials: \"include\",\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) {\r\n    throw new Error(data?.error?.message || data?.error || \"Failed to delete variant\");\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n/**\r\n * Unset isDefault for all other variants of a product when setting a new default\r\n * Enforces \"only one default per product\" constraint\r\n * @param {number} productId - Product ID (numeric)\r\n * @param {number} defaultVariantId - Variant ID to keep as default (numeric)\r\n * @returns {Object} Response from backend\r\n */\r\nexport async function unsetOtherDefaultsAPI(productId, defaultVariantId) {\r\n  try {\r\n    const res = await fetch(`${BASE_API_URL}/products/${productId}/unset-other-defaults`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify({\r\n        variantId: defaultVariantId,\r\n      }),\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) {\r\n      console.warn(\"Failed to unset other defaults:\", data?.error || \"Unknown error\");\r\n      // Don't throw - this is a non-critical operation\r\n      return data;\r\n    }\r\n\r\n    console.log(\"Successfully unset other defaults for product\", productId);\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"Error unsetting other defaults:\", err);\r\n    // Don't throw - this is a non-critical operation\r\n    return { success: false, error: err.message };\r\n  }\r\n}\r\n\r\n/**\r\n * Upload variant images\r\n * @param {Array<File>} files - Array of image files to upload\r\n * @returns {Object} Upload response from Strapi\r\n */\r\nexport async function uploadVariantImages(files) {\r\n  const formData = new FormData();\r\n  files.forEach((file) => formData.append(\"files\", file));\r\n\r\n  const res = await fetch(`${BASE_API_URL}/upload/variants/images`, {\r\n    method: \"POST\",\r\n    body: formData,\r\n    credentials: \"include\",\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const error = await res.text();\r\n    throw new Error(\"Image upload failed: \" + error);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Upload variant videos\r\n * @param {Array<File>} files - Array of video files to upload\r\n * @returns {Object} Upload response from Strapi\r\n */\r\nexport async function uploadVariantVideos(files) {\r\n  const formData = new FormData();\r\n  files.forEach((file) => formData.append(\"files\", file));\r\n\r\n  const res = await fetch(`${BASE_API_URL}/upload/variants/videos`, {\r\n    method: \"POST\",\r\n    body: formData,\r\n    credentials: \"include\",\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const error = await res.text();\r\n    throw new Error(\"Video upload failed: \" + error);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\n// ============================================================================\r\n// CATEGORY AND SUBCATEGORY API FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Fetch all categories from backend\r\n * @returns {Array} Array of categories\r\n */\r\nexport async function fetchCategoriesAPI() {\r\n  try {\r\n    const res = await fetch(`${BASE_API_URL}/categories`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    \r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to fetch categories\");\r\n    }\r\n\r\n    return data.data || [];\r\n  } catch (err) {\r\n    console.error(\"Error fetching categories:\", err);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch all subcategories from backend\r\n * @returns {Array} Array of subcategories\r\n */\r\nexport async function fetchSubcategoriesAPI() {\r\n  try {\r\n    const res = await fetch(`${BASE_API_URL}/subcategories`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    \r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to fetch subcategories\");\r\n    }\r\n\r\n    return data.data || [];\r\n  } catch (err) {\r\n    console.error(\"Error fetching subcategories:\", err);\r\n    return [];\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// FAQ API FUNCTIONS\r\n// ============================================================================\r\n/**\r\n * Fetch all FAQs with optional pagination\r\n * @param {Object} options - Query options { page, pageSize, populate }\r\n * @returns {Array} List of FAQs\r\n */\r\nexport async function fetchFAQsAPI(options = {}) {\r\n  try {\r\n    const query = new URLSearchParams();\r\n    if (options.page) query.append(\"page\", options.page);\r\n    if (options.pageSize) query.append(\"pageSize\", options.pageSize);\r\n    if (options.populate) query.append(\"populate\", options.populate);\r\n\r\n    const res = await fetch(`${BASE_API_URL}/faqs${query.toString() ? \"?\" + query : \"\"}`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to fetch FAQs\");\r\n    }\r\n\r\n    return data.data || [];\r\n  } catch (err) {\r\n    console.error(\"Error fetching FAQs:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch a single FAQ by ID with all relationships\r\n * @param {string|number} faqId - FAQ ID or documentId\r\n * @returns {Object} FAQ with products\r\n */\r\nexport async function fetchFAQByIdAPI(faqId) {\r\n  try {\r\n    const res = await fetch(`${BASE_API_URL}/faqs/${faqId}`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (!res.ok || !data.data) {\r\n      throw new Error(data?.error || \"FAQ not found\");\r\n    }\r\n\r\n    return data.data;\r\n  } catch (err) {\r\n    console.error(`Error fetching FAQ ${faqId}:`, err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Create a new FAQ\r\n * @param {Object} faqData - { Question, Answer }\r\n * @param {string} status - 'draft' or 'published' (default: 'published')\r\n * @returns {Object} Created FAQ\r\n */\r\nexport async function createFAQAPI(faqData, status = \"published\") {\r\n  try {\r\n    const payload = {\r\n      Question: faqData.Question || faqData.question,\r\n      Answer: faqData.Answer || faqData.answer,\r\n    };\r\n\r\n    const res = await fetch(`${BASE_API_URL}/faqs?status=${status}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      console.error(\"FAQ creation failed:\", data);\r\n      throw new Error(data?.error || \"Failed to create FAQ\");\r\n    }\r\n\r\n    console.log(\"FAQ created:\", data.data);\r\n    return data.data;\r\n  } catch (err) {\r\n    console.error(\"Error creating FAQ:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Update an existing FAQ\r\n * @param {string|number} faqId - FAQ ID or documentId\r\n * @param {Object} updateData - { Question, Answer }\r\n * @param {string} status - 'draft' or 'published'\r\n * @returns {Object} Updated FAQ\r\n */\r\nexport async function updateFAQAPI(faqId, updateData, status = \"published\") {\r\n  try {\r\n    const payload = {\r\n      Question: updateData.Question || updateData.question,\r\n      Answer: updateData.Answer || updateData.answer,\r\n    };\r\n\r\n    const res = await fetch(\r\n      `${BASE_API_URL}/faqs/${faqId}?status=${status}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(payload),\r\n      }\r\n    );\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      console.error(\"FAQ update failed:\", data);\r\n      throw new Error(data?.error || \"Failed to update FAQ\");\r\n    }\r\n\r\n    console.log(\"FAQ updated:\", data.data);\r\n    return data.data;\r\n  } catch (err) {\r\n    console.error(\"Error updating FAQ:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a FAQ\r\n * @param {string|number} faqId - FAQ ID or documentId\r\n * @returns {Object} Delete response\r\n */\r\nexport async function deleteFAQAPI(faqId) {\r\n  try {\r\n    const res = await fetch(`${BASE_API_URL}/faqs/${faqId}`, {\r\n      method: \"DELETE\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to delete FAQ\");\r\n    }\r\n\r\n    console.log(\"FAQ deleted\");\r\n    return data;\r\n  } catch (err) {\r\n    console.error(`Error deleting FAQ ${faqId}:`, err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Link products to an FAQ\r\n * Creates relations in Strapi junction table\r\n * @param {string|number} faqId - FAQ ID or documentId\r\n * @param {Array} productIds - Array of product IDs (numeric IDs preferred)\r\n * @returns {Object} Updated FAQ with linked products\r\n */\r\nexport async function linkProductsToFAQAPI(faqId, productIds) {\r\n  try {\r\n    console.log(\"Frontend: Linking products to FAQ\");\r\n    console.log(\"  FAQ ID:\", faqId);\r\n    console.log(\"  Product IDs:\", productIds);\r\n\r\n    const payload = {\r\n      products: productIds || [],\r\n    };\r\n\r\n    const res = await fetch(`${BASE_API_URL}/faqs/${faqId}/products`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n    \r\n    if (!res.ok) {\r\n      console.error(\"FAQ linking failed:\");\r\n      console.error(\"   Response status:\", res.status);\r\n      console.error(\"   Response data:\", data);\r\n      throw new Error(data?.error?.message || data?.error || data?.message || \"Failed to link products to FAQ\");\r\n    }\r\n\r\n    console.log(\"FAQ linking successful:\", data);\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"Error linking products to FAQ:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Unlink products from an FAQ\r\n * @param {string|number} faqId - FAQ ID or documentId\r\n * @param {Array} productIdsToRemove - Array of product IDs to unlink\r\n * @returns {Object} Updated FAQ\r\n */\r\nexport async function unlinkProductsFromFAQAPI(faqId, productIdsToRemove) {\r\n  try {\r\n    console.log(\"Frontend: Unlinking products from FAQ\");\r\n    console.log(\"  FAQ ID:\", faqId);\r\n    console.log(\"  Product IDs to remove:\", productIdsToRemove);\r\n\r\n    const payload = {\r\n      productIdsToRemove: productIdsToRemove || [],\r\n    };\r\n\r\n    const res = await fetch(`${BASE_API_URL}/faqs/${faqId}/products`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await res.json();\r\n    \r\n    if (!res.ok) {\r\n      console.error(\"FAQ unlinking failed:\", data);\r\n      throw new Error(data?.error || \"Failed to unlink products from FAQ\");\r\n    }\r\n\r\n    console.log(\"FAQ unlinking successful\");\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"Error unlinking products from FAQ:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch FAQs by product ID\r\n * @param {string|number} productId - Product ID or documentId\r\n * @returns {Array} FAQs linked to this product (transformed to frontend format)\r\n */\r\nexport async function fetchFAQsByProductAPI(productId) {\r\n  try {\r\n    const endpoint = `${BASE_API_URL}/products/${productId}/faqs`;\r\n    console.log(\"Frontend: Fetching FAQs for product:\", productId);\r\n    console.log(`Frontend: Calling endpoint: ${endpoint}`);\r\n    \r\n    const res = await fetch(endpoint, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    const data = await res.json();\r\n    \r\n    console.log(`Frontend: API Response status: ${res.status}`);\r\n    console.log(`Frontend: Raw response data:`, data);\r\n    \r\n    if (!res.ok) {\r\n      console.error(`Frontend: API Error (${res.status}):`, data?.error);\r\n      throw new Error(data?.error || \"Failed to fetch product FAQs\");\r\n    }\r\n\r\n    const faqs = data.data || [];\r\n    console.log(`Frontend: Received ${faqs.length} FAQs from backend`);\r\n    \r\n    // Backend now returns FAQs already partially transformed, but ensure consistency\r\n    const transformedFAQs = faqs.map((faq) => {\r\n      console.log(`Processing FAQ ${faq.id}:`, { \r\n        hasQuestion: !!faq.Question, \r\n        hasAnswer: !!faq.Answer,\r\n        hasAttributes: !!faq.attributes \r\n      });\r\n      \r\n      // Get question and answer from either top-level or attributes\r\n      const question = faq.Question || faq.attributes?.Question || '';\r\n      const answer = faq.Answer || faq.attributes?.Answer || '';\r\n      \r\n      return {\r\n        id: faq.id,\r\n        documentId: faq.documentId,\r\n        question: question,\r\n        answer: answer,\r\n        Question: question,\r\n        Answer: answer,\r\n      };\r\n    });\r\n    \r\n    console.log(\"Frontend: FAQs transformed successfully:\", transformedFAQs.length);\r\n    if (transformedFAQs.length > 0) {\r\n      console.log(`Frontend: Sample FAQ:`, { \r\n        id: transformedFAQs[0].id,\r\n        question: transformedFAQs[0].question?.substring(0, 50)\r\n      });\r\n    }\r\n    return transformedFAQs;\r\n  } catch (err) {\r\n    console.error(\"Frontend: Error fetching product FAQs:\", err.message);\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Link FAQs to product (BOTH draft and published versions)\r\n * CRITICAL: Ensures FAQs appear in both draft and published product versions\r\n * @param {string|number} productDocumentId - Product documentId\r\n * @param {Array} faqIds - Array of FAQ IDs (documentIds or numeric)\r\n * @returns {Object} Link result\r\n */\r\nexport async function linkFAQsToProductAPI(productDocumentId, faqIds) {\r\n  try {\r\n    console.log(\"Frontend: Linking FAQs to product (all versions)\");\r\n    console.log(\"  Product documentId:\", productDocumentId);\r\n    console.log(\"  FAQ IDs:\", faqIds);\r\n\r\n    const payload = {\r\n      faqIds: faqIds || [],\r\n    };\r\n\r\n    const res = await fetch(\r\n      `${BASE_API_URL}/products/${productDocumentId}/link-faqs`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(payload),\r\n      }\r\n    );\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) {\r\n      console.error(\"FAQ linking failed:\");\r\n      console.error(\"   Response status:\", res.status);\r\n      console.error(\"   Response data:\", data);\r\n      throw new Error(\r\n        data?.error?.message ||\r\n          data?.error ||\r\n          data?.message ||\r\n          \"Failed to link FAQs to product\"\r\n      );\r\n    }\r\n\r\n    console.log(\"FAQs linked to product (all versions):\", data);\r\n    return data;\r\n  } catch (err) {\r\n    console.error(\"Error linking FAQs to product:\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1287, "column": 0}, "map": {"version":3,"sources":["file:///D:/B-Sec/Projects/Rural%20Pulse/Frontend/components/products/Product.js"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\n\r\nimport Sidebar from \"../shared/Sidebar\";\r\n// import EditProduct from \"../editProduct/EditProduct\";\r\nimport \"../../app/style/Product.css\";\r\nimport { showToast } from \"../shared/toast\";\r\nimport { FiEdit, FiTrash2 } from \"react-icons/fi\";\r\n\r\n// Import API handlers\r\nimport {\r\n  fetchProductsAPI,\r\n  formatProductData,\r\n  deleteProductAPI,\r\n  fetchCategoriesAPI,\r\n  fetchSubcategoriesAPI,\r\n} from \"../../utils/productApi\";\r\n\r\nexport default function ProductsDashboard() {\r\n  const router = useRouter();\r\n\r\n  const [profile, setProfile] = useState(null);\r\n  const [products, setProducts] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filterSearch, setFilterSearch] = useState(\"\"); // Search within filter\r\n  const [filterStatus, setFilterStatus] = useState(\"all\"); // all, draft, published\r\n  const [showFilterDropdown, setShowFilterDropdown] = useState(false);\r\n  // const [editingProduct, setEditingProduct] = useState(null);\r\n  const [deleteModal, setDeleteModal] = useState({ open: false, prodId: null });\r\n  const [expandedDesc, setExpandedDesc] = useState({});\r\n  \r\n  // Category and Subcategory filters\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [selectedCategories, setSelectedCategories] = useState([]);\r\n  const [selectedSubcategories, setSelectedSubcategories] = useState([]);\r\n\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(() => {\r\n    if (typeof window !== \"undefined\") {\r\n      const saved = localStorage.getItem(\"sidebarCollapsed\");\r\n      return saved !== null ? JSON.parse(saved) : false;\r\n    }\r\n    return false;\r\n  });\r\n\r\n  const [previewImages, setPreviewImages] = useState([]);\r\n  const [imageIndex, setImageIndex] = useState({});\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // LOAD USER PROFILE\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem(\"user\");\r\n    if (userData) {\r\n      try {\r\n        const parsedUser = JSON.parse(userData);\r\n        setProfile(parsedUser);\r\n      } catch (err) {\r\n        console.error(\"Failed to parse user data:\", err);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // LOAD PRODUCTS\r\n  useEffect(() => {\r\n    const loadProducts = async () => {\r\n      try {\r\n        const data = await fetchProductsAPI();\r\n        \r\n        // Backend now handles merging and filtering - just format the products array\r\n        const formattedProducts = formatProductData(data.products || []);\r\n        \r\n        // Debug: Log first product to see structure\r\n        if (formattedProducts.length > 0) {\r\n          console.log(\"ðŸ“¦ First product structure:\", formattedProducts[0]);\r\n          console.log(\"ðŸ“¦ Categories in first product:\", formattedProducts[0].categories);\r\n          console.log(\"ðŸ“¦ Sub-categories in first product:\", formattedProducts[0].sub_categories);\r\n        }\r\n        \r\n        // Sort by createdAt or updatedAt descending\r\n        const sortedProducts = formattedProducts.sort((a, b) => {\r\n          if (a.createdAt && b.createdAt) {\r\n            return new Date(b.createdAt) - new Date(a.createdAt);\r\n          }\r\n          if (a.updatedAt && b.updatedAt) {\r\n            return new Date(b.updatedAt) - new Date(a.updatedAt);\r\n          }\r\n          // fallback: sort by documentId as number descending\r\n          const aId = Number(a.documentId);\r\n          const bId = Number(b.documentId);\r\n          if (!isNaN(aId) && !isNaN(bId)) {\r\n            return bId - aId;\r\n          }\r\n          // fallback: string compare\r\n          return (b.documentId || '').toString().localeCompare((a.documentId || '').toString());\r\n        });\r\n        setProducts(sortedProducts);\r\n      } catch (err) {\r\n        setError(\"Failed to load products\");\r\n      }\r\n    };\r\n\r\n    loadProducts();\r\n  }, []);\r\n\r\n  // LOAD CATEGORIES AND SUBCATEGORIES\r\n  useEffect(() => {\r\n    const loadCategoriesAndSubcategories = async () => {\r\n      try {\r\n        const [categoriesData, subcategoriesData] = await Promise.all([\r\n          fetchCategoriesAPI(),\r\n          fetchSubcategoriesAPI(),\r\n        ]);\r\n        console.log(\"ðŸ“ Categories loaded:\", categoriesData);\r\n        console.log(\"ðŸ“ Subcategories loaded:\", subcategoriesData);\r\n        setCategories(categoriesData);\r\n        setSubcategories(subcategoriesData);\r\n      } catch (err) {\r\n        console.error(\"Failed to load categories and subcategories:\", err);\r\n      }\r\n    };\r\n\r\n    loadCategoriesAndSubcategories();\r\n  }, []);\r\n\r\n  // Move newly created or edited product to the top and re-sort\r\n  const moveProductToTop = (product) => {\r\n    setProducts((prev) => {\r\n      // Remove if already exists (edit case)\r\n      const filtered = prev.filter((p) => p.documentId !== product.documentId);\r\n      const newList = [product, ...filtered];\r\n      // Sort by createdAt or documentId descending\r\n      return newList.sort((a, b) => {\r\n        if (a.createdAt && b.createdAt) {\r\n          return new Date(b.createdAt) - new Date(a.createdAt);\r\n        }\r\n        if (a.updatedAt && b.updatedAt) {\r\n          return new Date(b.updatedAt) - new Date(a.updatedAt);\r\n        }\r\n        const aId = Number(a.documentId);\r\n        const bId = Number(b.documentId);\r\n        if (!isNaN(aId) && !isNaN(bId)) {\r\n          return bId - aId;\r\n        }\r\n        return (b.documentId || '').toString().localeCompare((a.documentId || '').toString());\r\n      });\r\n    });\r\n  };\r\n\r\n  const toggleDescription = (id) => {\r\n  setExpandedDesc((prev) => ({\r\n    ...prev,\r\n    [id]: !prev[id],\r\n  }));\r\n};\r\n\r\n\r\n\r\n  // SEARCH AND FILTER\r\n  let filteredProducts = products.filter((prod) => {\r\n    // Search filter\r\n    const matchesSearch = prod.name?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    // Status filter (draft, published, modified, or all)\r\n    let matchesStatus = true;\r\n    if (filterStatus === \"draft\") {\r\n      matchesStatus = prod.status === \"draft\";\r\n    } else if (filterStatus === \"published\") {\r\n      matchesStatus = prod.status === \"published\";\r\n    } else if (filterStatus === \"modified\") {\r\n      matchesStatus = prod.status === \"modified\";\r\n    }\r\n    // If filterStatus === \"all\", matchesStatus remains true\r\n    \r\n    // Category filter - product must have at least one selected category (match by documentId)\r\n    let matchesCategory = true;\r\n    if (selectedCategories.length > 0) {\r\n      const prodCategories = prod.categories || [];\r\n      // Extract documentIds from product categories\r\n      const prodCategoryDocIds = prodCategories.map(cat => {\r\n        return typeof cat === 'object' && cat !== null ? cat.documentId : cat;\r\n      });\r\n      // Check if product has any of the selected category documentIds\r\n      matchesCategory = prodCategoryDocIds.length > 0 && selectedCategories.some(catDocId => prodCategoryDocIds.includes(catDocId));\r\n    }\r\n    \r\n    // Subcategory filter - product must have at least one selected subcategory (match by documentId)\r\n    let matchesSubcategory = true;\r\n    if (selectedSubcategories.length > 0) {\r\n      const prodSubcategories = prod.sub_categories || [];\r\n      // Extract documentIds from product subcategories\r\n      const prodSubcategoryDocIds = prodSubcategories.map(subcat => {\r\n        return typeof subcat === 'object' && subcat !== null ? subcat.documentId : subcat;\r\n      });\r\n      // Check if product has any of the selected subcategory documentIds\r\n      matchesSubcategory = prodSubcategoryDocIds.length > 0 && selectedSubcategories.some(subcatDocId => prodSubcategoryDocIds.includes(subcatDocId));\r\n    }\r\n    \r\n    return matchesSearch && matchesStatus && matchesCategory && matchesSubcategory;\r\n  });\r\n\r\n  // Debug: Log filtering info when filters change\r\n  if (selectedCategories.length > 0 || selectedSubcategories.length > 0) {\r\n    console.log(\"ðŸ” Filter Debug:\", {\r\n      totalProducts: products.length,\r\n      selectedCategories,\r\n      selectedSubcategories,\r\n      filteredCount: filteredProducts.length,\r\n      allProductsWithCategories: products.map(p => ({ \r\n        id: p.documentId, \r\n        name: p.name, \r\n        categories: p.categories,\r\n        categoryDocIds: (p.categories || []).map(c => typeof c === 'object' ? c.documentId : c),\r\n        categoriesRaw: JSON.stringify(p.categories)\r\n      })),\r\n      filteredProductIds: filteredProducts.map(p => ({ id: p.documentId, name: p.name }))\r\n    });\r\n  } else {\r\n    // Also log when NO filters are selected to see all products\r\n    console.log(\"ðŸ“¦ All products (no filter):\", products.map(p => ({\r\n      id: p.documentId,\r\n      name: p.name,\r\n      categories: p.categories,\r\n      categoriesLength: (p.categories || []).length,\r\n      categoriesDetailed: (p.categories || []).map(c => ({\r\n        id: c.id,\r\n        documentId: c.documentId,\r\n        CategoryName: c.CategoryName\r\n      }))\r\n    })));\r\n  }\r\n\r\n  const searchedProducts = filteredProducts;\r\n\r\n  // PAGINATION\r\n  const PRODUCTS_PER_PAGE = 6;\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const totalPages = Math.ceil(searchedProducts.length / PRODUCTS_PER_PAGE);\r\n  const paginatedProducts = searchedProducts\r\n    .slice((currentPage - 1) * PRODUCTS_PER_PAGE, currentPage * PRODUCTS_PER_PAGE);\r\n\r\n  const handlePageChange = (page) => {\r\n    if (page >= 1 && page <= totalPages) setCurrentPage(page);\r\n  };\r\n\r\n  // LOGOUT\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"productVariantEnums\");\r\n    router.push(\"/signin\");\r\n  };\r\n\r\n  // DELETE\r\n  const handleDelete = async (prodId) => {\r\n    try {\r\n      const res = await deleteProductAPI(prodId);\r\n      if (res.status === \"success\") {\r\n        setProducts((prev) => prev.filter((p) => p.documentId !== prodId));\r\n        showToast(\"Product deleted successfully!\", \"success\");\r\n      } else {\r\n        showToast(\"Delete failed: \" + res.message, \"error\");\r\n      }\r\n    } catch (err) {\r\n      showToast(\"Error deleting product\", \"error\");\r\n    } finally {\r\n      setDeleteModal({ open: false, prodId: null });\r\n    }\r\n  };\r\n\r\n  // Listen for product add/edit events (assumes ProductForm or API triggers a custom event)\r\n  useEffect(() => {\r\n    const handler = (e) => {\r\n      if (e.detail && e.detail.product) {\r\n        moveProductToTop(e.detail.product);\r\n      }\r\n    };\r\n    window.addEventListener(\"product-updated\", handler);\r\n    return () => window.removeEventListener(\"product-updated\", handler);\r\n  }, []);\r\n\r\n  // Close filter dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (showFilterDropdown && !e.target.closest('.filter-dropdown-container')) {\r\n        setShowFilterDropdown(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    return () => document.removeEventListener(\"click\", handleClickOutside);\r\n  }, [showFilterDropdown]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex\">\r\n      {/* SIDEBAR */}\r\n      <Sidebar \r\n        profile={profile} \r\n        onLogout={handleLogout}\r\n        onCollapseChange={setSidebarCollapsed}\r\n      />\r\n\r\n      {/* MAIN CONTENT */}\r\n      <div \r\n        className=\"flex-1 transition-all duration-300\" \r\n        style={{ marginLeft: sidebarCollapsed ? '80px' : '256px' }}\r\n      >\r\n        <div className=\"max-w-8xl mx-5 px-6 py-8\">\r\n\r\n        {/* Sticky Header and Search */}\r\n        <div className=\"sticky top-0 z-20 bg-gray-50 pb-2\">\r\n           <div className=\"flex items-center justify-between mb-2 pt-2\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold\">Product Management</h1>\r\n              <p className=\"text-gray-600\">\r\n                Manage your AgChem product catalog\r\n              </p>\r\n            </div>\r\n            {products.length > 0 && (\r\n              <button\r\n                className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors text-white !text-white flex items-center justify-center cursor-pointer font-semibold text-sm h-12\"\r\n                style={{color: '#fff'}}\r\n                onClick={() => router.push(\"/add-product\")}\r\n              >\r\n                + Add New Product\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"bg-white p-4 rounded-lg flex gap-4 items-center justify-between mb-2\">\r\n            <input\r\n              placeholder=\"Search products...\"\r\n              className=\"border p-2 rounded w-64\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n            \r\n            {/* Filter Dropdown */}\r\n            <div className=\"relative filter-dropdown-container\">\r\n              <button\r\n                onClick={() => setShowFilterDropdown(!showFilterDropdown)}\r\n                className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded flex items-center gap-2 transition-colors text-white !text-white font-semibold text-sm h-10\"\r\n                style={{color: '#fff'}}\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\" />\r\n                </svg>\r\n                Filter\r\n              </button>\r\n              \r\n              {showFilterDropdown && (\r\n                <div className=\"absolute right-0 top-full mt-1 bg-white border border-gray-300 rounded shadow-lg z-10 w-80\" style={{ maxHeight: '600px', overflowY: 'auto' }}>\r\n                  {/* Search within filter */}\r\n                  <div className=\"p-3 border-b sticky top-0 bg-white\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Search filters...\"\r\n                      className=\"w-full border p-2 rounded text-sm\"\r\n                      value={filterSearch}\r\n                      onChange={(e) => setFilterSearch(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  {/* Status Filter */}\r\n                  <div className=\"p-3 border-b\">\r\n                    <p className=\"text-sm font-semibold text-gray-700 mb-2\">Status</p>\r\n                    <div className=\"space-y-1\">\r\n                      {[\"All Products\", \"Draft\", \"Published\", \"Modified\"].filter(option =>\r\n                        option.toLowerCase().includes(filterSearch.toLowerCase())\r\n                      ).map((option) => {\r\n                        const statusValue = option === \"All Products\" ? \"all\" : option.toLowerCase();\r\n                        return (\r\n                          <button\r\n                            key={option}\r\n                            onClick={() => { setFilterStatus(statusValue); }}\r\n                            className={`block w-full text-left px-3 py-2 rounded text-sm ${filterStatus === statusValue ? \"bg-green-100 text-green-700 font-semibold\" : \"hover:bg-gray-100\"}`}\r\n                          >\r\n                            {option}\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Categories Filter */}\r\n                  <div className=\"p-3 border-b\">\r\n                    <p className=\"text-sm font-semibold text-gray-700 mb-2\">Categories (Multi-select)</p>\r\n                    <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n                      {categories.length > 0 ? (\r\n                        categories.filter(cat =>\r\n                          cat.categoryName?.toLowerCase().includes(filterSearch.toLowerCase())\r\n                        ).map((cat) => (\r\n                          <label key={cat.documentId} className=\"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectedCategories.includes(cat.documentId)}\r\n                              onChange={(e) => {\r\n                                if (e.target.checked) {\r\n                                  setSelectedCategories([...selectedCategories, cat.documentId]);\r\n                                } else {\r\n                                  setSelectedCategories(selectedCategories.filter(docId => docId !== cat.documentId));\r\n                                }\r\n                              }}\r\n                              className=\"w-4 h-4 rounded\"\r\n                            />\r\n                            <span className=\"text-sm\">{cat.categoryName}</span>\r\n                          </label>\r\n                        ))\r\n                      ) : (\r\n                        <p className=\"text-sm text-gray-500\">No categories available</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Subcategories Filter - Shows only subcategories from selected categories */}\r\n                  {selectedCategories.length > 0 && (\r\n                    <div className=\"p-3 border-t\">\r\n                      <p className=\"text-sm font-semibold text-gray-700 mb-2\">Subcategories</p>\r\n                      <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n                        {(() => {\r\n                          // Get subcategories from selected categories\r\n                          const selectedCategoryObjects = categories.filter(cat => \r\n                            selectedCategories.includes(cat.documentId)\r\n                          );\r\n                          \r\n                          // Flatten all subcategories from selected categories\r\n                          const availableSubcategories = [];\r\n                          selectedCategoryObjects.forEach(cat => {\r\n                            if (cat.sub_categories && Array.isArray(cat.sub_categories)) {\r\n                              cat.sub_categories.forEach(subcat => {\r\n                                // Avoid duplicates\r\n                                if (!availableSubcategories.find(s => s.documentId === subcat.documentId)) {\r\n                                  availableSubcategories.push(subcat);\r\n                                }\r\n                              });\r\n                            }\r\n                          });\r\n                          \r\n                          return availableSubcategories.length > 0 ? (\r\n                            availableSubcategories.filter(subcat =>\r\n                              subcat.subcategoryname?.toLowerCase().includes(filterSearch.toLowerCase())\r\n                            ).map((subcat) => (\r\n                              <label key={subcat.documentId} className=\"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded\">\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedSubcategories.includes(subcat.documentId)}\r\n                                  onChange={(e) => {\r\n                                    if (e.target.checked) {\r\n                                      setSelectedSubcategories([...selectedSubcategories, subcat.documentId]);\r\n                                    } else {\r\n                                      setSelectedSubcategories(selectedSubcategories.filter(docId => docId !== subcat.documentId));\r\n                                    }\r\n                                  }}\r\n                                  className=\"w-4 h-4 rounded\"\r\n                                />\r\n                                <span className=\"text-sm\">{subcat.subcategoryname}</span>\r\n                              </label>\r\n                            ))\r\n                          ) : (\r\n                            <p className=\"text-sm text-gray-500\">No subcategories in selected categories</p>\r\n                          );\r\n                        })()}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Clear All Filters Button */}\r\n                  {(selectedCategories.length > 0 || selectedSubcategories.length > 0 || filterStatus !== \"all\") && (\r\n                    <div className=\"p-3 border-t sticky bottom-0 bg-white\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedCategories([]);\r\n                          setSelectedSubcategories([]);\r\n                          setFilterStatus(\"all\");\r\n                          setFilterSearch(\"\");\r\n                        }}\r\n                        className=\"w-full text-center px-3 py-2 rounded text-sm bg-red-50 text-red-600 hover:bg-red-100 font-semibold\"\r\n                      >\r\n                        Clear All Filters\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <p className=\"text-gray-600 text-sm mb-2\">\r\n            Showing {paginatedProducts.length} of {searchedProducts.length} products\r\n          </p>\r\n        </div>\r\n\r\n        {/* PRODUCTS GRID WITH PAGINATION AND SCROLL */}\r\n        <div className=\"relative\">\r\n          {/* Product grid scroll area starts below header/search */}\r\n          <div\r\n            style={{ minHeight: '200px', maxHeight: 'calc(100vh - 260px)', overflowY: 'auto', scrollbarWidth: 'none', msOverflowStyle: 'none' }}\r\n            className=\"hide-scrollbar\"\r\n          >\r\n            {products.length === 0 ? (\r\n              <div  className=\"flex flex-col items-center justify-center w-full\" style={{ minHeight: 'calc(100vh - 260px)' }}>\r\n                <div className=\"flex flex-col items-center justify-center\">\r\n                  <Image\r\n                    src=\"/AG - Add first product.png\"\r\n                    alt=\"Empty products\"\r\n                    width={310}\r\n                    height={200}\r\n                    style={{ maxWidth: '310px', width: '100%', height: 'auto', marginBottom: '8px' }}\r\n                  />\r\n                  <h2 className=\"text-4xl font-bold text-gray-800 mb-3\">Nothing here yet...</h2>\r\n                  <p className=\"text-gray-600 text-lg mb-8\">Looks like products are on vacation.</p>\r\n                  <button\r\n                    onClick={() => router.push(\"/add-product\")}\r\n                    className=\"border border-green-500 bg-transparent text-black px-5 py-3 rounded font-semibold text-lg transition-colors hover:bg-green-700 hover:text-white\"\r\n                  >\r\n                    + Add Product\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className={`grid grid-cols-1 md:grid-cols-3 gap-6 items-stretch`}>\r\n                {\r\n                \r\n                [...paginatedProducts].map((prod) => (\r\n                <div key={prod.documentId} className=\"bg-white shadow p-5 rounded-lg flex flex-col justify-between items-stretch min-h-[420px] h-full w-full max-w-[370px] mx-auto cursor-pointer\" onClick={() => router.push(`/products/view/${prod.documentId}`)}>\r\n                  {/* IMAGE CAROUSEL */}\r\n                  <div className=\"relative h-44 w-full bg-gray-100 rounded-lg flex items-center justify-center\">\r\n                    {/* STATUS BADGE */}\r\n                    <div className=\"absolute top-2 right-2 z-10\">\r\n                      <span className={`px-3 py-1 rounded-full text-xs font-semibold text-white ${\r\n                        prod.status === 'published' ? 'bg-green-600' : \r\n                        prod.status === 'modified' ? 'bg-red-600' : \r\n                        'bg-blue-500'\r\n                      }`}>\r\n                        {prod.status === 'published' ? 'Published' : \r\n                         prod.status === 'modified' ? 'Modified' : \r\n                         'Draft'}\r\n                      </span>\r\n                    </div>\r\n                    {(() => {\r\n                      const currentMedia = prod.images?.[imageIndex[prod.documentId] || 0];\r\n                      const isVideo = currentMedia && /\\.(mp4|webm|ogg)$/i.test(currentMedia);\r\n                      \r\n                      if (!currentMedia) {\r\n                        return <div className=\"text-gray-400\">No media</div>;\r\n                      }\r\n                      \r\n                      if (isVideo) {\r\n                        return (\r\n                          <video\r\n                            src={currentMedia}\r\n                            className=\"h-44 w-full object-contain rounded-lg\"\r\n                            controls\r\n                          />\r\n                        );\r\n                      }\r\n                      \r\n                      return (\r\n                        <Image\r\n                          src={currentMedia}\r\n                          alt={prod.name}\r\n                          width={300}\r\n                          height={176}\r\n                          className=\"h-44 w-full object-contain rounded-lg\"\r\n                          unoptimized\r\n                        />\r\n                      );\r\n                    })()}\r\n                    {prod.images.length > 1 && (\r\n                      <>\r\n                        {/* Left */}\r\n                        <button\r\n                          className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-white p-2 rounded-full shadow-md hover:bg-gray-50 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setImageIndex((prev) => {\r\n                              const current = prev[prod.documentId] || 0;\r\n                              const next = current === 0 ? 0 : current - 1;\r\n                              return {\r\n                                ...prev,\r\n                                [prod.documentId]: next,\r\n                              };\r\n                            });\r\n                          }}\r\n                          disabled={(imageIndex[prod.documentId] || 0) === 0}\r\n                        >\r\n                          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                          </svg>\r\n                        </button>\r\n                        {/* Right */}\r\n                        <button\r\n                          className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-white p-2 rounded-full shadow-md hover:bg-gray-50 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setImageIndex((prev) => {\r\n                              const current = prev[prod.documentId] || 0;\r\n                              const next = current === prod.images.length - 1 ? current : current + 1;\r\n                              return {\r\n                                ...prev,\r\n                                [prod.documentId]: next,\r\n                              };\r\n                            });\r\n                          }}\r\n                          disabled={(imageIndex[prod.documentId] || 0) === prod.images.length - 1}\r\n                        >\r\n                          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                          </svg>\r\n                        </button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  {/* DOT INDICATORS / VIDEO INDICATOR */}\r\n                  {prod.images.length > 1 && (\r\n                    <div className=\"flex justify-center mt-2 space-x-2\">\r\n                      {prod.images.map((media, idx) => {\r\n                        const isVideo = media && /\\.(mp4|webm|ogg)$/i.test(media);\r\n                        return (\r\n                          <button\r\n                            key={idx}\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              setImageIndex(prev => ({ ...prev, [prod.documentId]: idx }));\r\n                            }}\r\n                            className={`w-3 h-3 rounded-full flex items-center justify-center transition-all ${\r\n                              (imageIndex[prod.documentId] || 0) === idx \r\n                                ? \"bg-green-600 scale-125\" \r\n                                : \"bg-gray-300 hover:bg-gray-400\"\r\n                            }`}\r\n                            title={isVideo ? `Video ${idx + 1}` : `Image ${idx + 1}`}\r\n                          >\r\n                            {isVideo && (imageIndex[prod.documentId] || 0) === idx && (\r\n                              <svg className=\"w-2 h-2 text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path d=\"M8 5v14l11-7z\" />\r\n                              </svg>\r\n                            )}\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                  {/* TEXT */}\r\n                  <div className=\"font-bold text-lg mt-2\">\r\n                      {prod.name.length > 40 ? prod.name.slice(0, 40) + \"...\" : prod.name}\r\n                    </div>\r\n                    <div className=\"text-gray-400 text-xs mt-0\">\r\n                      {(() => {\r\n                        const categories = Array.isArray(prod.categories) ? prod.categories : [];\r\n                        const subcategories = Array.isArray(prod.sub_categories) ? prod.sub_categories : [];\r\n                        \r\n                        const categoryNames = categories.map(cat => \r\n                          typeof cat === 'object' && cat.categoryName ? cat.categoryName : cat\r\n                        ).join(\", \");\r\n                        \r\n                        const subcategoryNames = subcategories.map(subcat => \r\n                          typeof subcat === 'object' && subcat.subcategoryname ? subcat.subcategoryname : subcat\r\n                        ).join(\", \");\r\n                        \r\n                        return (\r\n                          <>\r\n                            {categoryNames && <div><span className=\"font-semibold\">Category:</span> {categoryNames}</div>}\r\n                            {subcategoryNames && <div><span className=\"font-semibold\">Subcategory:</span> {subcategoryNames}</div>}\r\n                          </>\r\n                        );\r\n                      })()}\r\n                    </div>\r\n                   <div className=\"text-gray-700 text-sm mt-1\">\r\n                      {(() => {\r\n                        const text = prod.description || \"\";\r\n                        const isLong = text.length > 150;\r\n\r\n                        if (!isLong) {\r\n                          return text; // Short description\r\n                        }\r\n\r\n                        const shortText = text.substring(0, 150) + \"...\";\r\n\r\n                        return (\r\n                          <>\r\n                            {expandedDesc[prod.documentId] ? text : shortText}\r\n\r\n                            <button\r\n                              className=\"text-green-600 font-semibold ml-2\"\r\n                              onClick={() => toggleDescription(prod.documentId)}\r\n                            >\r\n                              {expandedDesc[prod.documentId] ? \"Read Less\" : \"Read More\"}\r\n                            </button>\r\n                          </>\r\n                        );\r\n                      })()}\r\n                    </div>\r\n                  {/* ACTIONS */}\r\n                  <div className=\"flex gap-2 mt-3\">\r\n                    <button\r\n                      className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors text-white !text-white flex items-center justify-center cursor-pointer\"\r\n                      style={{color: '#fff'}}\r\n                      title=\"Edit\"\r\n                      onClick={e => {\r\n                        e.stopPropagation();\r\n                        router.push(`/products/edit/${prod.documentId}`);\r\n                      }}\r\n                    >\r\n                      <FiEdit size={18} />\r\n                    </button>\r\n                    <button\r\n                      className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors text-white !text-white flex items-center justify-center cursor-pointer\"\r\n                      style={{color: '#fff'}}\r\n                      title=\"Delete\"\r\n                      onClick={e => {\r\n                        e.stopPropagation();\r\n                        setDeleteModal({ open: true, prodId: prod.documentId });\r\n                      }}\r\n                    >\r\n                      <FiTrash2 size={18} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            )}\r\n          </div>\r\n          {/* PAGINATION CONTROLS */}\r\n          {totalPages > 1 && (\r\n            <div className=\"flex justify-center items-center gap-2 mt-6\">\r\n              <button\r\n                className=\"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-200\"\r\n                onClick={() => handlePageChange(currentPage - 1)}\r\n                disabled={currentPage === 1}\r\n              >\r\n                Prev\r\n              </button>\r\n              {Array.from({ length: totalPages }, (_, i) => (\r\n                <button\r\n                  key={i}\r\n                  className={`px-3 py-1 rounded ${currentPage === i + 1 ? 'bg-green-600 text-white' : 'bg-gray-200 hover:bg-gray-300'}`}\r\n                  onClick={() => handlePageChange(i + 1)}\r\n                >\r\n                  {i + 1}\r\n                </button>\r\n              ))}\r\n              <button\r\n                className=\"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-200\"\r\n                onClick={() => handlePageChange(currentPage + 1)}\r\n                disabled={currentPage === totalPages}\r\n              >\r\n                Next\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      {/* DELETE CONFIRMATION MODAL */}\r\n      {deleteModal.open && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full border border-gray-200 relative\">\r\n            <button\r\n              className=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl font-bold\"\r\n              onClick={() => setDeleteModal({ open: false, prodId: null })}\r\n              aria-label=\"Close\"\r\n            >\r\n              &times;\r\n            </button>\r\n            <h3 className=\"text-lg font-bold mb-3 text-gray-900\">Delete Confirmation</h3>\r\n            <p className=\"mb-5 text-base text-gray-800\">\r\n              Are you sure that you want to delete the product:\r\n              <span className=\"font-bold text-red-600 ml-1\">\r\n                {products.find(p => p.documentId === deleteModal.prodId)?.name || ''}\r\n              </span>\r\n              ?\r\n            </p>\r\n            <div className=\"flex justify-end gap-3\">\r\n              <button\r\n                className=\"flex items-center gap-2 px-5 py-2 rounded bg-green-600 text-white hover:bg-green-700 font-semibold text-base\"\r\n                onClick={() => handleDelete(deleteModal.prodId)}\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" /></svg>\r\n                Yes\r\n              </button>\r\n              <button\r\n                className=\"flex items-center gap-2 px-5 py-2 rounded bg-green-600 text-white hover:bg-green-700 font-semibold text-base\"\r\n                onClick={() => setDeleteModal({ open: false, prodId: null })}\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                No\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* IMAGE PREVIEW POPUP */}\r\n      {previewImages.length > 0 && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white p-4 rounded-lg max-w-xl w-full relative\">\r\n            <button\r\n              onClick={() => setPreviewImages([])}\r\n              className=\"absolute top-2 right-2 text-gray-700 font-bold\"\r\n            >\r\n              âœ•\r\n            </button>\r\n\r\n            <div className=\"flex items-center justify-center gap-2\">\r\n              {previewImages.map((img, index) => (\r\n                <Image\r\n                  key={index}\r\n                  src={img}\r\n                  width={400}\r\n                  height={256}\r\n                  className=\"h-64 w-auto rounded-lg\"\r\n                  alt=\"Product preview\"\r\n                  unoptimized\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;AAGA;AACA;AAEA,sBAAsB;AACtB;AAZA;;;;;;;;;;AAoBe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC,KAAK,uBAAuB;IAC7E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC,QAAQ,wBAAwB;IACjF,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,8DAA8D;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;QAAE,MAAM;QAAO,QAAQ;IAAK;IAC3E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC,CAAC;IAElD,mCAAmC;IACnC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACrD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC/D,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAErE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;QACvD;;QAIA,OAAO;IACT;IAEA,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACrD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC,CAAC;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,oBAAoB;IACpB,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW,aAAa,OAAO,CAAC;QACtC,IAAI,UAAU;YACZ,IAAI;gBACF,MAAM,aAAa,KAAK,KAAK,CAAC;gBAC9B,WAAW;YACb,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,8BAA8B;YAC9C;QACF;IACF,GAAG,EAAE;IAEL,gBAAgB;IAChB,IAAA,kNAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,OAAO,MAAM,IAAA,uIAAgB;gBAEnC,6EAA6E;gBAC7E,MAAM,oBAAoB,IAAA,wIAAiB,EAAC,KAAK,QAAQ,IAAI,EAAE;gBAE/D,4CAA4C;gBAC5C,IAAI,kBAAkB,MAAM,GAAG,GAAG;oBAChC,QAAQ,GAAG,CAAC,+BAA+B,iBAAiB,CAAC,EAAE;oBAC/D,QAAQ,GAAG,CAAC,mCAAmC,iBAAiB,CAAC,EAAE,CAAC,UAAU;oBAC9E,QAAQ,GAAG,CAAC,uCAAuC,iBAAiB,CAAC,EAAE,CAAC,cAAc;gBACxF;gBAEA,4CAA4C;gBAC5C,MAAM,iBAAiB,kBAAkB,IAAI,CAAC,CAAC,GAAG;oBAChD,IAAI,EAAE,SAAS,IAAI,EAAE,SAAS,EAAE;wBAC9B,OAAO,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS;oBACrD;oBACA,IAAI,EAAE,SAAS,IAAI,EAAE,SAAS,EAAE;wBAC9B,OAAO,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS;oBACrD;oBACA,oDAAoD;oBACpD,MAAM,MAAM,OAAO,EAAE,UAAU;oBAC/B,MAAM,MAAM,OAAO,EAAE,UAAU;oBAC/B,IAAI,CAAC,MAAM,QAAQ,CAAC,MAAM,MAAM;wBAC9B,OAAO,MAAM;oBACf;oBACA,2BAA2B;oBAC3B,OAAO,CAAC,EAAE,UAAU,IAAI,EAAE,EAAE,QAAQ,GAAG,aAAa,CAAC,CAAC,EAAE,UAAU,IAAI,EAAE,EAAE,QAAQ;gBACpF;gBACA,YAAY;YACd,EAAE,OAAO,KAAK;gBACZ,SAAS;YACX;QACF;QAEA;IACF,GAAG,EAAE;IAEL,oCAAoC;IACpC,IAAA,kNAAS,EAAC;QACR,MAAM,iCAAiC;YACrC,IAAI;gBACF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,MAAM,QAAQ,GAAG,CAAC;oBAC5D,IAAA,yIAAkB;oBAClB,IAAA,4IAAqB;iBACtB;gBACD,QAAQ,GAAG,CAAC,yBAAyB;gBACrC,QAAQ,GAAG,CAAC,4BAA4B;gBACxC,cAAc;gBACd,iBAAiB;YACnB,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,gDAAgD;YAChE;QACF;QAEA;IACF,GAAG,EAAE;IAEL,8DAA8D;IAC9D,MAAM,mBAAmB,CAAC;QACxB,YAAY,CAAC;YACX,uCAAuC;YACvC,MAAM,WAAW,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK,QAAQ,UAAU;YACvE,MAAM,UAAU;gBAAC;mBAAY;aAAS;YACtC,6CAA6C;YAC7C,OAAO,QAAQ,IAAI,CAAC,CAAC,GAAG;gBACtB,IAAI,EAAE,SAAS,IAAI,EAAE,SAAS,EAAE;oBAC9B,OAAO,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS;gBACrD;gBACA,IAAI,EAAE,SAAS,IAAI,EAAE,SAAS,EAAE;oBAC9B,OAAO,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS;gBACrD;gBACA,MAAM,MAAM,OAAO,EAAE,UAAU;gBAC/B,MAAM,MAAM,OAAO,EAAE,UAAU;gBAC/B,IAAI,CAAC,MAAM,QAAQ,CAAC,MAAM,MAAM;oBAC9B,OAAO,MAAM;gBACf;gBACA,OAAO,CAAC,EAAE,UAAU,IAAI,EAAE,EAAE,QAAQ,GAAG,aAAa,CAAC,CAAC,EAAE,UAAU,IAAI,EAAE,EAAE,QAAQ;YACpF;QACF;IACF;IAEA,MAAM,oBAAoB,CAAC;QAC3B,gBAAgB,CAAC,OAAS,CAAC;gBACzB,GAAG,IAAI;gBACP,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG;YACjB,CAAC;IACH;IAIE,oBAAoB;IACpB,IAAI,mBAAmB,SAAS,MAAM,CAAC,CAAC;QACtC,gBAAgB;QAChB,MAAM,gBAAgB,KAAK,IAAI,EAAE,cAAc,SAAS,WAAW,WAAW;QAE9E,qDAAqD;QACrD,IAAI,gBAAgB;QACpB,IAAI,iBAAiB,SAAS;YAC5B,gBAAgB,KAAK,MAAM,KAAK;QAClC,OAAO,IAAI,iBAAiB,aAAa;YACvC,gBAAgB,KAAK,MAAM,KAAK;QAClC,OAAO,IAAI,iBAAiB,YAAY;YACtC,gBAAgB,KAAK,MAAM,KAAK;QAClC;QACA,wDAAwD;QAExD,2FAA2F;QAC3F,IAAI,kBAAkB;QACtB,IAAI,mBAAmB,MAAM,GAAG,GAAG;YACjC,MAAM,iBAAiB,KAAK,UAAU,IAAI,EAAE;YAC5C,8CAA8C;YAC9C,MAAM,qBAAqB,eAAe,GAAG,CAAC,CAAA;gBAC5C,OAAO,OAAO,QAAQ,YAAY,QAAQ,OAAO,IAAI,UAAU,GAAG;YACpE;YACA,gEAAgE;YAChE,kBAAkB,mBAAmB,MAAM,GAAG,KAAK,mBAAmB,IAAI,CAAC,CAAA,WAAY,mBAAmB,QAAQ,CAAC;QACrH;QAEA,iGAAiG;QACjG,IAAI,qBAAqB;QACzB,IAAI,sBAAsB,MAAM,GAAG,GAAG;YACpC,MAAM,oBAAoB,KAAK,cAAc,IAAI,EAAE;YACnD,iDAAiD;YACjD,MAAM,wBAAwB,kBAAkB,GAAG,CAAC,CAAA;gBAClD,OAAO,OAAO,WAAW,YAAY,WAAW,OAAO,OAAO,UAAU,GAAG;YAC7E;YACA,mEAAmE;YACnE,qBAAqB,sBAAsB,MAAM,GAAG,KAAK,sBAAsB,IAAI,CAAC,CAAA,cAAe,sBAAsB,QAAQ,CAAC;QACpI;QAEA,OAAO,iBAAiB,iBAAiB,mBAAmB;IAC9D;IAEA,gDAAgD;IAChD,IAAI,mBAAmB,MAAM,GAAG,KAAK,sBAAsB,MAAM,GAAG,GAAG;QACrE,QAAQ,GAAG,CAAC,oBAAoB;YAC9B,eAAe,SAAS,MAAM;YAC9B;YACA;YACA,eAAe,iBAAiB,MAAM;YACtC,2BAA2B,SAAS,GAAG,CAAC,CAAA,IAAK,CAAC;oBAC5C,IAAI,EAAE,UAAU;oBAChB,MAAM,EAAE,IAAI;oBACZ,YAAY,EAAE,UAAU;oBACxB,gBAAgB,CAAC,EAAE,UAAU,IAAI,EAAE,EAAE,GAAG,CAAC,CAAA,IAAK,OAAO,MAAM,WAAW,EAAE,UAAU,GAAG;oBACrF,eAAe,KAAK,SAAS,CAAC,EAAE,UAAU;gBAC5C,CAAC;YACD,oBAAoB,iBAAiB,GAAG,CAAC,CAAA,IAAK,CAAC;oBAAE,IAAI,EAAE,UAAU;oBAAE,MAAM,EAAE,IAAI;gBAAC,CAAC;QACnF;IACF,OAAO;QACL,4DAA4D;QAC5D,QAAQ,GAAG,CAAC,gCAAgC,SAAS,GAAG,CAAC,CAAA,IAAK,CAAC;gBAC7D,IAAI,EAAE,UAAU;gBAChB,MAAM,EAAE,IAAI;gBACZ,YAAY,EAAE,UAAU;gBACxB,kBAAkB,CAAC,EAAE,UAAU,IAAI,EAAE,EAAE,MAAM;gBAC7C,oBAAoB,CAAC,EAAE,UAAU,IAAI,EAAE,EAAE,GAAG,CAAC,CAAA,IAAK,CAAC;wBACjD,IAAI,EAAE,EAAE;wBACR,YAAY,EAAE,UAAU;wBACxB,cAAc,EAAE,YAAY;oBAC9B,CAAC;YACH,CAAC;IACH;IAEA,MAAM,mBAAmB;IAEzB,aAAa;IACb,MAAM,oBAAoB;IAC1B,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,aAAa,KAAK,IAAI,CAAC,iBAAiB,MAAM,GAAG;IACvD,MAAM,oBAAoB,iBACvB,KAAK,CAAC,CAAC,cAAc,CAAC,IAAI,mBAAmB,cAAc;IAE9D,MAAM,mBAAmB,CAAC;QACxB,IAAI,QAAQ,KAAK,QAAQ,YAAY,eAAe;IACtD;IAEA,SAAS;IACT,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,SAAS;IACT,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,uIAAgB,EAAC;YACnC,IAAI,IAAI,MAAM,KAAK,WAAW;gBAC5B,YAAY,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK;gBAC1D,IAAA,0IAAS,EAAC,iCAAiC;YAC7C,OAAO;gBACL,IAAA,0IAAS,EAAC,oBAAoB,IAAI,OAAO,EAAE;YAC7C;QACF,EAAE,OAAO,KAAK;YACZ,IAAA,0IAAS,EAAC,0BAA0B;QACtC,SAAU;YACR,eAAe;gBAAE,MAAM;gBAAO,QAAQ;YAAK;QAC7C;IACF;IAEA,0FAA0F;IAC1F,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU,CAAC;YACf,IAAI,EAAE,MAAM,IAAI,EAAE,MAAM,CAAC,OAAO,EAAE;gBAChC,iBAAiB,EAAE,MAAM,CAAC,OAAO;YACnC;QACF;QACA,OAAO,gBAAgB,CAAC,mBAAmB;QAC3C,OAAO,IAAM,OAAO,mBAAmB,CAAC,mBAAmB;IAC7D,GAAG,EAAE;IAEL,8CAA8C;IAC9C,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,sBAAsB,CAAC,EAAE,MAAM,CAAC,OAAO,CAAC,+BAA+B;gBACzE,sBAAsB;YACxB;QACF;QAEA,SAAS,gBAAgB,CAAC,SAAS;QACnC,OAAO,IAAM,SAAS,mBAAmB,CAAC,SAAS;IACrD,GAAG;QAAC;KAAmB;IAEvB,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC,0IAAO;gBACN,SAAS;gBACT,UAAU;gBACV,kBAAkB;;;;;;0BAIpB,8OAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,YAAY,mBAAmB,SAAS;gBAAQ;0BAEzD,cAAA,8OAAC;oBAAI,WAAU;;sCAGf,8OAAC;4BAAI,WAAU;;8CACZ,8OAAC;oCAAI,WAAU;;sDACd,8OAAC;;8DACC,8OAAC;oDAAG,WAAU;8DAAqB;;;;;;8DACnC,8OAAC;oDAAE,WAAU;8DAAgB;;;;;;;;;;;;wCAI9B,SAAS,MAAM,GAAG,mBACjB,8OAAC;4CACC,WAAU;4CACV,OAAO;gDAAC,OAAO;4CAAM;4CACrB,SAAS,IAAM,OAAO,IAAI,CAAC;sDAC5B;;;;;;;;;;;;8CAKL,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,aAAY;4CACZ,WAAU;4CACV,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;sDAI/C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,SAAS,IAAM,sBAAsB,CAAC;oDACtC,WAAU;oDACV,OAAO;wDAAC,OAAO;oDAAM;;sEAErB,8OAAC;4DAAI,WAAU;4DAAU,MAAK;4DAAO,QAAO;4DAAe,SAAQ;sEACjE,cAAA,8OAAC;gEAAK,eAAc;gEAAQ,gBAAe;gEAAQ,aAAa;gEAAG,GAAE;;;;;;;;;;;wDACjE;;;;;;;gDAIP,oCACC,8OAAC;oDAAI,WAAU;oDAA6F,OAAO;wDAAE,WAAW;wDAAS,WAAW;oDAAO;;sEAEzJ,8OAAC;4DAAI,WAAU;sEACb,cAAA,8OAAC;gEACC,MAAK;gEACL,aAAY;gEACZ,WAAU;gEACV,OAAO;gEACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;sEAKnD,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAE,WAAU;8EAA2C;;;;;;8EACxD,8OAAC;oEAAI,WAAU;8EACZ;wEAAC;wEAAgB;wEAAS;wEAAa;qEAAW,CAAC,MAAM,CAAC,CAAA,SACzD,OAAO,WAAW,GAAG,QAAQ,CAAC,aAAa,WAAW,KACtD,GAAG,CAAC,CAAC;wEACL,MAAM,cAAc,WAAW,iBAAiB,QAAQ,OAAO,WAAW;wEAC1E,qBACE,8OAAC;4EAEC,SAAS;gFAAQ,gBAAgB;4EAAc;4EAC/C,WAAW,CAAC,iDAAiD,EAAE,iBAAiB,cAAc,8CAA8C,qBAAqB;sFAEhK;2EAJI;;;;;oEAOX;;;;;;;;;;;;sEAKJ,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAE,WAAU;8EAA2C;;;;;;8EACxD,8OAAC;oEAAI,WAAU;8EACZ,WAAW,MAAM,GAAG,IACnB,WAAW,MAAM,CAAC,CAAA,MAChB,IAAI,YAAY,EAAE,cAAc,SAAS,aAAa,WAAW,KACjE,GAAG,CAAC,CAAC,oBACL,8OAAC;4EAA2B,WAAU;;8FACpC,8OAAC;oFACC,MAAK;oFACL,SAAS,mBAAmB,QAAQ,CAAC,IAAI,UAAU;oFACnD,UAAU,CAAC;wFACT,IAAI,EAAE,MAAM,CAAC,OAAO,EAAE;4FACpB,sBAAsB;mGAAI;gGAAoB,IAAI,UAAU;6FAAC;wFAC/D,OAAO;4FACL,sBAAsB,mBAAmB,MAAM,CAAC,CAAA,QAAS,UAAU,IAAI,UAAU;wFACnF;oFACF;oFACA,WAAU;;;;;;8FAEZ,8OAAC;oFAAK,WAAU;8FAAW,IAAI,YAAY;;;;;;;2EAbjC,IAAI,UAAU;;;;kGAiB5B,8OAAC;wEAAE,WAAU;kFAAwB;;;;;;;;;;;;;;;;;wDAM1C,mBAAmB,MAAM,GAAG,mBAC3B,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAE,WAAU;8EAA2C;;;;;;8EACxD,8OAAC;oEAAI,WAAU;8EACZ,CAAC;wEACA,6CAA6C;wEAC7C,MAAM,0BAA0B,WAAW,MAAM,CAAC,CAAA,MAChD,mBAAmB,QAAQ,CAAC,IAAI,UAAU;wEAG5C,qDAAqD;wEACrD,MAAM,yBAAyB,EAAE;wEACjC,wBAAwB,OAAO,CAAC,CAAA;4EAC9B,IAAI,IAAI,cAAc,IAAI,MAAM,OAAO,CAAC,IAAI,cAAc,GAAG;gFAC3D,IAAI,cAAc,CAAC,OAAO,CAAC,CAAA;oFACzB,mBAAmB;oFACnB,IAAI,CAAC,uBAAuB,IAAI,CAAC,CAAA,IAAK,EAAE,UAAU,KAAK,OAAO,UAAU,GAAG;wFACzE,uBAAuB,IAAI,CAAC;oFAC9B;gFACF;4EACF;wEACF;wEAEA,OAAO,uBAAuB,MAAM,GAAG,IACrC,uBAAuB,MAAM,CAAC,CAAA,SAC5B,OAAO,eAAe,EAAE,cAAc,SAAS,aAAa,WAAW,KACvE,GAAG,CAAC,CAAC,uBACL,8OAAC;gFAA8B,WAAU;;kGACvC,8OAAC;wFACC,MAAK;wFACL,SAAS,sBAAsB,QAAQ,CAAC,OAAO,UAAU;wFACzD,UAAU,CAAC;4FACT,IAAI,EAAE,MAAM,CAAC,OAAO,EAAE;gGACpB,yBAAyB;uGAAI;oGAAuB,OAAO,UAAU;iGAAC;4FACxE,OAAO;gGACL,yBAAyB,sBAAsB,MAAM,CAAC,CAAA,QAAS,UAAU,OAAO,UAAU;4FAC5F;wFACF;wFACA,WAAU;;;;;;kGAEZ,8OAAC;wFAAK,WAAU;kGAAW,OAAO,eAAe;;;;;;;+EAbvC,OAAO,UAAU;;;;sGAiB/B,8OAAC;4EAAE,WAAU;sFAAwB;;;;;;oEAEzC,CAAC;;;;;;;;;;;;wDAMN,CAAC,mBAAmB,MAAM,GAAG,KAAK,sBAAsB,MAAM,GAAG,KAAK,iBAAiB,KAAK,mBAC3F,8OAAC;4DAAI,WAAU;sEACb,cAAA,8OAAC;gEACC,SAAS;oEACP,sBAAsB,EAAE;oEACxB,yBAAyB,EAAE;oEAC3B,gBAAgB;oEAChB,gBAAgB;gEAClB;gEACA,WAAU;0EACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CASb,8OAAC;oCAAE,WAAU;;wCAA6B;wCAC/B,kBAAkB,MAAM;wCAAC;wCAAK,iBAAiB,MAAM;wCAAC;;;;;;;;;;;;;sCAKnE,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC;oCACC,OAAO;wCAAE,WAAW;wCAAS,WAAW;wCAAuB,WAAW;wCAAQ,gBAAgB;wCAAQ,iBAAiB;oCAAO;oCAClI,WAAU;8CAET,SAAS,MAAM,KAAK,kBACnB,8OAAC;wCAAK,WAAU;wCAAmD,OAAO;4CAAE,WAAW;wCAAsB;kDAC3G,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,wIAAK;oDACJ,KAAI;oDACJ,KAAI;oDACJ,OAAO;oDACP,QAAQ;oDACR,OAAO;wDAAE,UAAU;wDAAS,OAAO;wDAAQ,QAAQ;wDAAQ,cAAc;oDAAM;;;;;;8DAEjF,8OAAC;oDAAG,WAAU;8DAAwC;;;;;;8DACtD,8OAAC;oDAAE,WAAU;8DAA6B;;;;;;8DAC1C,8OAAC;oDACC,SAAS,IAAM,OAAO,IAAI,CAAC;oDAC3B,WAAU;8DACX;;;;;;;;;;;;;;;;6DAML,8OAAC;wCAAI,WAAW,CAAC,mDAAmD,CAAC;kDAGnE;+CAAI;yCAAkB,CAAC,GAAG,CAAC,CAAC,qBAC5B,8OAAC;gDAA0B,WAAU;gDAA8I,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,eAAe,EAAE,KAAK,UAAU,EAAE;;kEAE/O,8OAAC;wDAAI,WAAU;;0EAEb,8OAAC;gEAAI,WAAU;0EACb,cAAA,8OAAC;oEAAK,WAAW,CAAC,wDAAwD,EACxE,KAAK,MAAM,KAAK,cAAc,iBAC9B,KAAK,MAAM,KAAK,aAAa,eAC7B,eACA;8EACC,KAAK,MAAM,KAAK,cAAc,cAC9B,KAAK,MAAM,KAAK,aAAa,aAC7B;;;;;;;;;;;4DAGJ,CAAC;gEACA,MAAM,eAAe,KAAK,MAAM,EAAE,CAAC,UAAU,CAAC,KAAK,UAAU,CAAC,IAAI,EAAE;gEACpE,MAAM,UAAU,gBAAgB,qBAAqB,IAAI,CAAC;gEAE1D,IAAI,CAAC,cAAc;oEACjB,qBAAO,8OAAC;wEAAI,WAAU;kFAAgB;;;;;;gEACxC;gEAEA,IAAI,SAAS;oEACX,qBACE,8OAAC;wEACC,KAAK;wEACL,WAAU;wEACV,QAAQ;;;;;;gEAGd;gEAEA,qBACE,8OAAC,wIAAK;oEACJ,KAAK;oEACL,KAAK,KAAK,IAAI;oEACd,OAAO;oEACP,QAAQ;oEACR,WAAU;oEACV,WAAW;;;;;;4DAGjB,CAAC;4DACA,KAAK,MAAM,CAAC,MAAM,GAAG,mBACpB;;kFAEE,8OAAC;wEACC,WAAU;wEACV,SAAS,CAAC;4EACR,EAAE,eAAe;4EACjB,cAAc,CAAC;gFACb,MAAM,UAAU,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI;gFACzC,MAAM,OAAO,YAAY,IAAI,IAAI,UAAU;gFAC3C,OAAO;oFACL,GAAG,IAAI;oFACP,CAAC,KAAK,UAAU,CAAC,EAAE;gFACrB;4EACF;wEACF;wEACA,UAAU,CAAC,UAAU,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,MAAM;kFAEjD,cAAA,8OAAC;4EAAI,WAAU;4EAAU,MAAK;4EAAO,QAAO;4EAAe,SAAQ;sFACjE,cAAA,8OAAC;gFAAK,eAAc;gFAAQ,gBAAe;gFAAQ,aAAa;gFAAG,GAAE;;;;;;;;;;;;;;;;kFAIzE,8OAAC;wEACC,WAAU;wEACV,SAAS,CAAC;4EACR,EAAE,eAAe;4EACjB,cAAc,CAAC;gFACb,MAAM,UAAU,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI;gFACzC,MAAM,OAAO,YAAY,KAAK,MAAM,CAAC,MAAM,GAAG,IAAI,UAAU,UAAU;gFACtE,OAAO;oFACL,GAAG,IAAI;oFACP,CAAC,KAAK,UAAU,CAAC,EAAE;gFACrB;4EACF;wEACF;wEACA,UAAU,CAAC,UAAU,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM,GAAG;kFAEtE,cAAA,8OAAC;4EAAI,WAAU;4EAAU,MAAK;4EAAO,QAAO;4EAAe,SAAQ;sFACjE,cAAA,8OAAC;gFAAK,eAAc;gFAAQ,gBAAe;gFAAQ,aAAa;gFAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;;oDAO9E,KAAK,MAAM,CAAC,MAAM,GAAG,mBACpB,8OAAC;wDAAI,WAAU;kEACZ,KAAK,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO;4DACvB,MAAM,UAAU,SAAS,qBAAqB,IAAI,CAAC;4DACnD,qBACE,8OAAC;gEAEC,SAAS,CAAC;oEACR,EAAE,eAAe;oEACjB,cAAc,CAAA,OAAQ,CAAC;4EAAE,GAAG,IAAI;4EAAE,CAAC,KAAK,UAAU,CAAC,EAAE;wEAAI,CAAC;gEAC5D;gEACA,WAAW,CAAC,qEAAqE,EAC/E,CAAC,UAAU,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,MAAM,MACnC,2BACA,iCACJ;gEACF,OAAO,UAAU,CAAC,MAAM,EAAE,MAAM,GAAG,GAAG,CAAC,MAAM,EAAE,MAAM,GAAG;0EAEvD,WAAW,CAAC,UAAU,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,MAAM,qBACjD,8OAAC;oEAAI,WAAU;oEAAqB,MAAK;oEAAe,SAAQ;8EAC9D,cAAA,8OAAC;wEAAK,GAAE;;;;;;;;;;;+DAdP;;;;;wDAmBX;;;;;;kEAIJ,8OAAC;wDAAI,WAAU;kEACV,KAAK,IAAI,CAAC,MAAM,GAAG,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,GAAG,MAAM,QAAQ,KAAK,IAAI;;;;;;kEAErE,8OAAC;wDAAI,WAAU;kEACZ,CAAC;4DACA,MAAM,aAAa,MAAM,OAAO,CAAC,KAAK,UAAU,IAAI,KAAK,UAAU,GAAG,EAAE;4DACxE,MAAM,gBAAgB,MAAM,OAAO,CAAC,KAAK,cAAc,IAAI,KAAK,cAAc,GAAG,EAAE;4DAEnF,MAAM,gBAAgB,WAAW,GAAG,CAAC,CAAA,MACnC,OAAO,QAAQ,YAAY,IAAI,YAAY,GAAG,IAAI,YAAY,GAAG,KACjE,IAAI,CAAC;4DAEP,MAAM,mBAAmB,cAAc,GAAG,CAAC,CAAA,SACzC,OAAO,WAAW,YAAY,OAAO,eAAe,GAAG,OAAO,eAAe,GAAG,QAChF,IAAI,CAAC;4DAEP,qBACE;;oEACG,+BAAiB,8OAAC;;0FAAI,8OAAC;gFAAK,WAAU;0FAAgB;;;;;;4EAAgB;4EAAE;;;;;;;oEACxE,kCAAoB,8OAAC;;0FAAI,8OAAC;gFAAK,WAAU;0FAAgB;;;;;;4EAAmB;4EAAE;;;;;;;;;wDAGrF,CAAC;;;;;;kEAEJ,8OAAC;wDAAI,WAAU;kEACX,CAAC;4DACA,MAAM,OAAO,KAAK,WAAW,IAAI;4DACjC,MAAM,SAAS,KAAK,MAAM,GAAG;4DAE7B,IAAI,CAAC,QAAQ;gEACX,OAAO,MAAM,oBAAoB;4DACnC;4DAEA,MAAM,YAAY,KAAK,SAAS,CAAC,GAAG,OAAO;4DAE3C,qBACE;;oEACG,YAAY,CAAC,KAAK,UAAU,CAAC,GAAG,OAAO;kFAExC,8OAAC;wEACC,WAAU;wEACV,SAAS,IAAM,kBAAkB,KAAK,UAAU;kFAE/C,YAAY,CAAC,KAAK,UAAU,CAAC,GAAG,cAAc;;;;;;;;wDAIvD,CAAC;;;;;;kEAGL,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEACC,WAAU;gEACV,OAAO;oEAAC,OAAO;gEAAM;gEACrB,OAAM;gEACN,SAAS,CAAA;oEACP,EAAE,eAAe;oEACjB,OAAO,IAAI,CAAC,CAAC,eAAe,EAAE,KAAK,UAAU,EAAE;gEACjD;0EAEA,cAAA,8OAAC,wJAAM;oEAAC,MAAM;;;;;;;;;;;0EAEhB,8OAAC;gEACC,WAAU;gEACV,OAAO;oEAAC,OAAO;gEAAM;gEACrB,OAAM;gEACN,SAAS,CAAA;oEACP,EAAE,eAAe;oEACjB,eAAe;wEAAE,MAAM;wEAAM,QAAQ,KAAK,UAAU;oEAAC;gEACvD;0EAEA,cAAA,8OAAC,0JAAQ;oEAAC,MAAM;;;;;;;;;;;;;;;;;;+CA9LZ,KAAK,UAAU;;;;;;;;;;;;;;;gCAuM9B,aAAa,mBACZ,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,WAAU;4CACV,SAAS,IAAM,iBAAiB,cAAc;4CAC9C,UAAU,gBAAgB;sDAC3B;;;;;;wCAGA,MAAM,IAAI,CAAC;4CAAE,QAAQ;wCAAW,GAAG,CAAC,GAAG,kBACtC,8OAAC;gDAEC,WAAW,CAAC,kBAAkB,EAAE,gBAAgB,IAAI,IAAI,4BAA4B,iCAAiC;gDACrH,SAAS,IAAM,iBAAiB,IAAI;0DAEnC,IAAI;+CAJA;;;;;sDAOT,8OAAC;4CACC,WAAU;4CACV,SAAS,IAAM,iBAAiB,cAAc;4CAC9C,UAAU,gBAAgB;sDAC3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAWR,YAAY,IAAI,kBACf,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAU;4BACV,SAAS,IAAM,eAAe;oCAAE,MAAM;oCAAO,QAAQ;gCAAK;4BAC1D,cAAW;sCACZ;;;;;;sCAGD,8OAAC;4BAAG,WAAU;sCAAuC;;;;;;sCACrD,8OAAC;4BAAE,WAAU;;gCAA+B;8CAE1C,8OAAC;oCAAK,WAAU;8CACb,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,UAAU,KAAK,YAAY,MAAM,GAAG,QAAQ;;;;;;gCAC7D;;;;;;;sCAGT,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,WAAU;oCACV,SAAS,IAAM,aAAa,YAAY,MAAM;;sDAE9C,8OAAC;4CAAI,WAAU;4CAAU,MAAK;4CAAO,QAAO;4CAAe,aAAY;4CAAI,SAAQ;sDAAY,cAAA,8OAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,GAAE;;;;;;;;;;;wCAAyB;;;;;;;8CAG/K,8OAAC;oCACC,WAAU;oCACV,SAAS,IAAM,eAAe;4CAAE,MAAM;4CAAO,QAAQ;wCAAK;;sDAE1D,8OAAC;4CAAI,WAAU;4CAAU,MAAK;4CAAO,QAAO;4CAAe,aAAY;4CAAI,SAAQ;sDAAY,cAAA,8OAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,GAAE;;;;;;;;;;;wCAA+B;;;;;;;;;;;;;;;;;;;;;;;;YAS5L,cAAc,MAAM,GAAG,mBACtB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS,IAAM,iBAAiB,EAAE;4BAClC,WAAU;sCACX;;;;;;sCAID,8OAAC;4BAAI,WAAU;sCACZ,cAAc,GAAG,CAAC,CAAC,KAAK,sBACvB,8OAAC,wIAAK;oCAEJ,KAAK;oCACL,OAAO;oCACP,QAAQ;oCACR,WAAU;oCACV,KAAI;oCACJ,WAAW;mCANN;;;;;;;;;;;;;;;;;;;;;;;;;;;AAevB","debugId":null}}]
}